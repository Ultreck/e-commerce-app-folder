(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[5336],{75055:function(e){e.exports={container:"_2_wcYYDW",icon:"kBHd-qLb",text:"_1NTqDvv9"}},87691:function(e){e.exports={dialog:"_1POlyPmp",container:"_1X3y2wXx",linearBg:"_1xK6Gcja",title:"_32RF8Yus",subtitle:"_2ztFUCL6",orderInfo:"_93TeMRvB",orderInfoItem:"q17eklMx",goodsList:"_1oh-wQ4I",goodsImg:"_2OpaydjC",restNumMask:"_3_yBPnZb",restNum:"g6eIY-7k",details:"_3Ty3bOVB",detail:"Hmd15P7d",orderTotal:"_2fDZyDwz",paybtn:"_3vwqDW8g",cashierTitle:"_3PJZBqko",imgContainer:"_3Gyl2R5S",img:"lUhRSM8Y",listAmountStr:"_3rOE8mpo"}},45484:function(e){e.exports={button:"_3O6KM0xe",recommended:"_4TxvqCwA",paypalImg:"_2GJRN9in"}},80493:function(e){e.exports={isolate:"_3c2SSRH5"}},27540:function(e){e.exports={dialog:"hf7Q9qTL",dialogContainer:"_1KC1fV6L",wrapper:"-ZT7wXRS",title:"_3AO3hbr5",textWrapper:"Y4a_ul7l",icon:"_14j94rlX",text:"_26JWojrP",addressWrapper:"_2b4YZRTm",addressItem:"Q9zrHHJW",originAddress:"_2PzQGuTq",suggestAddress:"_3LGx4aaf",address:"_2L0lcLJF"}},74589:function(e){e.exports={container:"_1FSEAiQY","container__top-line":"_26MrPsC8","container__bottom-line":"_3Ys90Gk0",wrapper:"_2yypPWpC",wrapper__suspectedAddress:"nmUQ8R28",wrapper__forceRow:"z74JoIoZ",wrapper__forceColumn:"_3UfswM7o",titleWrapper:"_1dAPWDwM",btnSection:"_3brmFE2F",btn:"_2hA6zelv",titleWrapper__suspectedAddress:"_2wKLcX2L",icon:"_16i5EnX2",normalIcon:"_1r7FpGyi",text:"_1r5G0Umm",textLeft:"btThRSKf",normalText:"_1Dqv3QVD",taxErrorLinkText:"_3Qt7fEjY",changeBtn:"_32Z09L3p",changeBtn__suspectedAddress:"_57ftUmxl",changeBtn__forceRow:"_1ny0I2rZ",confirmBtn:"_1emSF10v",rightArrow:"_3U9GLxo8",newWrapper:"iX39EXKy",btnV2:"_1rLtbfxB"}},78016:function(e){e.exports={container:"_3t_sidwF",contentMask:"_2zjkSaBK",titleWrapper:"_3XdYkAvV",iconWrapper:"_3EMEwiWt",rtlImg:"_2WfFUS3U",titleIcon:"_2C4fW7VQ",contentCls:"_1ji82ta2",contentScrollCls:"_1vUy6Ke9",contentWrapper:"_2HGeX-QE",item:"_3vsKVgcI",subtitleWrapper:"_2jQMuLtI",subtitle:"_2aoonyWx",dotIcon:"_1kPkVy2v",desc:"_2YTFJ1vI",bottomBtn:"_3tohKsYg"}},32515:function(e){e.exports={divider:"_1sklBw3h",total:"_3ZSUKYqC",item:"_29qyeNYi"}},61451:function(e){e.exports={total:"_35IsaKkW",item:"_2UnRyrni",dot:"_2rbYXz-7"}},82259:function(e){e.exports={wrap:"_1KfnK7SG",noCard:"_3E3gLCeO",orderListPadding:"_2JGYW_Jq",cardInfo:"_11PG672X",cardLogo:"_2PPtQKkK",cardExpDate:"_1HDT6Egc",divider:"_2n6sqBsb",error:"UMjo2Qot",warn:"_3T3Av-hh",billingAddress:"_32MmTRcj",billingAddressTitle:"_1Wi1mk3a",billingAddressEdit:"_2ziU9ybg",billlingAddressName:"_4W9e_tTq",billlingAddressRegion:"_2Us8LUES",disputeOrderTitle:"_2mYtiGNS",order:"eGxCBSnt",rightArrow:"_1owatVOL"}},66360:function(e){e.exports={picContainer:"_10kCV6vK",img:"_2MShDD48",item:"_2XSmn0IW",cover:"_1hNpiPou",mask:"_1E1ky4tv"}},69403:function(e){e.exports={container:"_185De7vC",title:"_1PuO98VY",message:"_3Fp4iX2i",attachText:"_3M7PqZvb",button:"S45JlRT2",paymentErrorSubContent:"_2kLSU31w"}},52579:function(e){e.exports={close:"_204VRH6B",rootContainer:"BXOi9LKE",comfirmContainer:"_3v6CeXhL",containerClassName:"_2NKuuJkW",titleClassName:"_2BneCyF3",textClassName:"_35v_Wyd9",confirmClassName:"_2r2-1_oK",cancelClassName:"_5Ro6DObZ",footerClassName:"_1nduDSHv"}},97816:function(e){e.exports={spanContainer:"_2LCAqU-x"}},94116:function(e){e.exports={addressItem:"_33r9FV21",nameAndPhone:"_1RbkDDCe",addressName:"EOymwlK_",editBtn:"_3EiaSD_N",strict:"_38Qk8jMs",country:"_2YGWDtkV"}},10003:function(e){e.exports={addressInfoContainer:"_2D3eEpb-"}},24031:function(e){e.exports={itemWrapper:"_2qM6KODu",timeChangeInfo:"_2iWqmB7b",goodsListWrapper:"_2u714a7m",goodsImageWrapper:"_1I8fmHMH",goodsImage:"_221npyhh",moreCount:"SG1UDGdJ",orderSn:"_1fpJQq7F"}},45055:function(e){e.exports={scrollContainer:"_2K5_8953",confirmBtn:"_2dvFzyeY",title:"_3Gy0oqcP",icon:"_2TrmTA0H",subTitle:"_21aZqSWp",listWrapper:"bBo7ckVU",listItem:"_1A-mnwIb",resultDesc:"_37i9wDCU",orderInfoListWrapper:"oLUDM3Uf",arrowBtnClass:"_2IJve00I",rvLeftArrow:"_3VwthKBy",rvRightArrow:"YnR_67oZ",urllink:"_3wvH8UeN"}},41415:function(e){e.exports={close:"_2EzwK54W",successSvg:"_24UP0m3P",title:"_3hRLPRCG",successTitle:"_3YwFC9jX",successSubTitle:"_1-KZj9xZ",taxInfoWrapper:"_1ni1S_Bd",confirmButton:"_2EZRqeWv",cancelButton:"_2QcG3_ya",taxContainer:"_2AW09LvC",taxInfoTitle:"_116Ogrqg",taxAmount:"_3gN9Vdds",singleConcreteTax:"sSaccmDF",symbol:"_2c-4kB7h",needToPay:"oYsoT4dx",refundDetail:"_2IqoyANg",buttonContainer:"LpjZel4A",totalTax:"b8oQAvOW",totalTaxAmount:"_2198TkvD"}},9264:function(e){e.exports={titleWrapper:"_30Ilv4gc",title:"_2-uGgYWr",countDown:"_1ZuJ0H0i",countDownWrapper:"_1hHQ9bJ1",infoWrapper:"_2gxKoTBQ",paymentList:"_1iFcN7K8",buttonWrapper:"_3LccvHs-",button:"_2ti9cYw4",btnText:"_390HhNhQ"}},35425:function(e){e.exports={close:"_2mw30dc3",successWrapper:"_3O2ZlBim",iconWrapper:"_1fCFj7Hj",icon:"_1zQrTMw2",title:"PLOfIKn5",successDesc:"_19j6xtiC",timeoutWrapper:"_2z7RClrw",desc:"TS0g8-r2",addressDesc:"_37hWiwEh",updateSucInfoWrapper:"_1YvRfMh8",updateSucInfo:"_3uDgdUpM",addressInfoContainer:"_3Vbm5GUk",addressInfoWrapper:"_2XdkkNcY",ellipsis:"ab00ZN_b",editBtn:"_26UD-ODg",info:"_3e_4Ia6W",receiveName:"_293njze9",mobile:"_2TNRNCop",address:"CIjK8yB7",header:"_2mbwONEK",reasonBox:"lVZaA0Yg",content:"hgPF_46n",buttonWrapper:"_3TJhyoeJ",button:"_1nFFfwbw",btnText:"_2ap_S8rZ"}},22838:function(e){e.exports={alertText:"_3V34J-fa",addressBox:"_3CsiRFoH"}},51496:function(e){e.exports={checkIcon:"_2_rLZ8-A",titleText:"_3BIs91Z1",alertText:"TTN-foNQ",alertPrompt:"_6LdCsAO_",addressBox:"_30IUvhs0"}},32107:function(e){e.exports={updateSucInfoWrapper:"FcwnCy-5",updateSucInfo:"_2GKRXgaJ",multiSucInfo:"_1DEqdgp4"}},40764:function(e,n,t){"use strict";t.r(n),t.d(n,{I18nContext:function(){return h.gJ},I18nextProvider:function(){return d.x},INITIAL_I18N_STORE_LOADED:function(){return T.m},RETRY_CDN_HOST:function(){return T.e},Trans:function(){return a.x},Translation:function(){return u},changeLanguage:function(){return r.v2},composeInitialProps:function(){return h.rz},createInstance:function(){return r.Q_},date:function(){return S},default:function(){return r.Ay},exists:function(){return r.t2},getConfig:function(){return N.z},getDefaults:function(){return h.rV},getFixedT:function(){return r.DJ},getI18n:function(){return h.TO},getInitialProps:function(){return h.Dz},getResolvedLanguage:function(){return P.Ph},getT:function(){return P.lW},hasLoadedNamespace:function(){return r.NM},init:function(){return r.Ts},initI18nClient:function(){return w.W},initReactI18next:function(){return h.r9},loadLanguages:function(){return r.GA},loadNamespaces:function(){return r.dM},loadOtherLanguages:function(){return P.MP},loadResources:function(){return r._H},number:function(){return b},plural:function(){return O},reloadResources:function(){return r.t0},select:function(){return E},selectOrdinal:function(){return C},setDefaultNamespace:function(){return r.bi},setDefaults:function(){return h.Pj},setI18n:function(){return h.Vx},t:function(){return r.t},time:function(){return y},ultimateFallbackLng:function(){return N.J},use:function(){return r.Yx},useSSR:function(){return f.a},useTranslation:function(){return s.B},withI18n:function(){return I.z},withSSR:function(){return _},withTranslation:function(){return o.C}});var r=t(72635),a=t(7638),s=t(97582),o=t(30693),i=t(6356),l=t(56687),c=["ns","children"];function u(e){var n=e.ns,t=e.children,r=(0,l.A)(e,c),a=(0,s.B)(n,r),o=(0,i.A)(a,3),u=o[0],d=o[1],p=o[2];return t(u,{i18n:d,lng:d.language},p)}var d=t(69616),p=(t(79432),t(52675),t(2008),t(26099),t(83851),t(44114),t(23500),t(81278),t(67945),t(84185),t(61877)),m=t(33514),f=t(25326),h=t(59981),v=t(89411),A=["initialI18nStore","initialLanguage"];function g(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function _(){return function(e){function n(n){var t=n.initialI18nStore,r=n.initialLanguage,a=(0,l.A)(n,A);return(0,f.a)(t,r),m.createElement(e,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?g(Object(t),!0).forEach((function(n){(0,p.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):g(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({},a))}return n.getInitialProps=(0,h.rz)(e),n.displayName="withI18nextSSR(".concat((0,v.Mn)(e),")"),n.WrappedComponent=e,n}}var S=function(){return""},y=function(){return""},b=function(){return""},E=function(){return""},O=function(){return""},C=function(){return""},P=t(13496),T=t(42679),N=t(64917),w=t(46952),I=t(90460)},2283:function(e,n,t){"use strict";var r=t(14242),a=t(33514),s=t(97582),o=t(54930),i=function(e,n){var t,i=(0,s.B)("bec-fe.svg-icons-h5"),l=i.t,c=i.i18n;return a.createElement(o.A,(0,r.A)({},e,{"aria-label":null!==(t=e["aria-label"])&&void 0!==t?t:c.exists("aria-label.CheckboxSelectCopy",{ns:"bec-fe.svg-icons-h5"})?l("aria-label.CheckboxSelectCopy"):void 0,ref:n,path:"M512 46.5c257.1 0 465.5 208.4 465.5 465.5 0 257.1-208.4 465.5-465.5 465.5-257.1 0-465.5-208.4-465.5-465.5 0-257.1 208.4-465.5 465.5-465.5z m211.4 326.6c-17.3-13.8-42.6-12.8-58.7 3.1l-202.2 200.2-102.3-92.9c-18.1-16.4-46-15.1-62.5 3-16.4 18.1-15.1 46 3 62.5l133.4 121.1c17.4 15.8 44.1 15.2 60.8-1.4l232-229.6c17.4-17.2 17.5-45.2 0.3-62.6z"}))};n.A=a.forwardRef(i)},75565:function(e,n,t){"use strict";t.d(n,{n:function(){return c}});var r=t(33514),a=t(31089),s=t(95789),o=t(75055),i=t.n(o),l=(0,r.memo)((function(e){var n=e.text,t=e.onTimeout;return r.createElement(a.A.Controller,{duration:2,onTimeout:t,PortalComponent:null},r.createElement(a.A.Container,null,r.createElement("div",{className:i().container},r.createElement("svg",{className:i().icon,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",version:"1.1",viewBox:"0 0 1024 1024"},r.createElement("g",null,r.createElement("path",{d:"M512 0c282.8 0 512 229.2 512 512 0 282.8-229.2 512-512 512-282.8 0-512-229.2-512-512 0-282.8 229.2-512 512-512z m0 42.1c-259.5 0-469.9 210.4-469.9 469.9 0 259.5 210.4 469.9 469.9 469.9 259.5 0 469.9-210.4 469.9-469.9 0-259.5-210.4-469.9-469.9-469.9z m263 310.5l1.5 1.4c7.9 7.8 8.4 20.2 1.6 28.7l-1.4 1.5-319.4 322.7c-7.6 7.7-19.7 8.4-28.2 1.9l-1.5-1.3-164.1-152.4c-8.6-8-9.2-21.5-1.2-30.2 7.5-8.1 19.9-9 28.6-2.4l1.6 1.3 148.9 138.4 305-308.1c7.8-7.9 20.2-8.4 28.6-1.5z"}))),r.createElement("div",{className:i().text},n))))})),c=function(e){var n=(0,s.A)(r.createElement(l,{text:e,onTimeout:function(){return n()}}))}},27880:function(e,n,t){"use strict";t.d(n,{Ay:function(){return G},KR:function(){return Y}});t(79432),t(52675),t(2008),t(83851),t(44114),t(23500),t(81278),t(67945),t(84185);var r=t(61877),a=t(74533),s=t(11286),o=t.n(s),i=(t(33110),t(26099),t(3362),t(72635)),l=t(8515),c=t(83836),u=t(13852),d=t(86482),p=t(98037),m=t(47743),f=t(86372),h=t(53075),v=t(99635),A=t(56247),g=t(74153),_=t(82816),S=(t(62062),t(34782),t(33514)),y=t(32485),b=t.n(y),E=t(82370),O=t(87837),C=t(10147),P=t(34678),T=t(97582),N=t(54869),w=t(87691),I=t.n(w),x=t(99117);function k(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function L(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?k(Object(t),!0).forEach((function(n){(0,r.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):k(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var R=new A.bE({PayUIDialog:function(e){var n=e.children,t=e.onClose,r=e.onConfirm,a=e.payUIProps,s=(0,T.B)("bec-fe.web-pay-ui").t,o=a||{},i=o.signSvcText,l=o.signSvcPOText,c=o.goodsUrlList,u=o.amountVOList,d=o.cashierTitle,p=o.parentOrderSn,m=S.createElement("div",{className:I().container},S.createElement("div",{className:I().linearBg},S.createElement("div",{className:b()(I().title,"flex-box","align-items-center","justify-content-center")},S.createElement("div",{className:b()(I().imgContainer,"inline-flex","align-items-center","justify-content-center")},S.createElement(E.Ay,{className:I().img,src:"https://aimg.kwcdn.com/upload_aimg/transaction/9fda0f05-d67c-48f1-8dfc-171529d279f7.png.slim.png",alt:""})),S.createElement("span",null,s("SignOnDelivery"))),S.createElement("div",{className:I().subtitle},S.createElement(N.$,null,i)),S.createElement("div",{className:b()(I().orderInfo,"flex-box","justify-content-between")},S.createElement("div",{className:I().orderInfoItem},S.createElement(N.$,null,l)),S.createElement("div",{className:I().goodsList},!(null==c||!c.length)&&c.length<=4&&c.map((function(e){return S.createElement(E.Ay,{className:I().goodsImg,src:e,alt:""})})),!(null==c||!c.length)&&c.length>4&&S.createElement(S.Fragment,null,c.slice(0,4).map((function(e){return S.createElement(E.Ay,{className:I().goodsImg,src:e,alt:""})})),S.createElement("div",{className:I().restNumMask}),S.createElement("div",{className:I().restNum},"+".concat(c.length-4+1)))))),S.createElement("div",{className:I().details},!(null==u||!u.length)&&u.map((function(e,n){var t=e.amountNameStr,r=e.listAmountStr,a=e.amountStr;return S.createElement("div",{className:b()(I().detail,"flex-box","justify-content-between"),style:{fontWeight:(null==u?void 0:u.length)===n+1?600:400}},S.createElement("div",null,t),S.createElement("div",null,!!r&&S.createElement("span",{className:I().listAmountStr},r),a))}))),S.createElement("div",{className:I().cashierTitle},d)),f=u[u.length-1],h=f.amountNameStr+f.amountStr,v=S.createElement("div",{className:"flex-box justify-content-between"},S.createElement("div",{className:I().orderTotal},h),S.createElement(O.Rp,{page_el_sn:243897,others:{po_sn:p}},S.createElement(C.A,{className:I().paybtn,onClick:function(){return r()}},s("PayNow"))));return(0,S.useEffect)((function(){(0,x.WW)({page_el_sn:243896,po_sn:p})}),[]),S.createElement(P.A,{onClose:function(){return t()},size:"l",title:m,contentAfterBtn:v,baseDialogProps:{dialogProps:{className:I().dialog}}},n)}}),D="sign_on_delivery_serial_no",H=function(){var e=(0,a.A)(o().mark((function e(n){var t,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.parentOrderSn,r=n.serialNo,(0,m.A)({event:"signSvcCancelPayStart"}),e.next=4,(0,g.z)("/api/bg/freight/user/signSvc/cancel_pay",{parent_order_sn:t,serial_no:r},c.Cb).catch((function(e){return(0,m.A)({event:"signSvcCancelPayError",data:JSON.stringify(e)}),null}));case 4:a=e.sent,(0,m.A)({event:"signSvcCancelPayend",data:JSON.stringify(null==a?void 0:a.cancelResult)});case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),B=function(e){var n=e.parentOrderSn,t=e.serialNo;return(0,g.z)("/api/bg/freight/user/signSvc/check_pay_result",{parent_order_sn:n,serial_no:t},c.Cb).then((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).payResult;return e?{orderStatus:d.Re.Payed}:!1===e?{orderStatus:d.Re.Canceled}:{orderStatus:d.Re.Unkown}}))};function j(e){return M.apply(this,arguments)}function M(){return(M=(0,a.A)(o().mark((function e(n){var t,r,a,s,i,l,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.parentOrderSn,r=n.serialNo,a=3,s=1,i=3;case 4:if(!(s<=a)){e.next=23;break}return e.prev=5,e.next=8,B({parentOrderSn:t,serialNo:r});case 8:if(l=e.sent,(c=l.orderStatus)!==d.Re.Payed&&c!==d.Re.Canceled){e.next=13;break}return c===d.Re.Payed&&(0,x.WW)({page_el_sn:243898,po_sn:t}),e.abrupt("return",{orderStatus:c});case 13:if(!(i>0)){e.next=16;break}return e.next=16,new Promise((function(e){return setTimeout(e,1e3*i)}));case 16:e.next=20;break;case 18:e.prev=18,e.t0=e.catch(5);case 20:s++,e.next=4;break;case 23:return e.abrupt("return",{orderStatus:d.Re.Unkown});case 24:case"end":return e.stop()}}),e,null,[[5,18]])})))).apply(this,arguments)}var W=function(e){var n=e.parentOrderSn,t=e.serialNo;return(0,a.A)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",j({parentOrderSn:n,serialNo:t}));case 1:case"end":return e.stop()}}),e)})))},F=function(e){var n=e.parentOrderSn,t=e.serialNo;return function(){var e=(0,a.A)(o().mark((function e(r){var a,s,i,l,u,p,h,v,A,_;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f.A.show(),(0,m.A)({event:"signSvcPay_start",data:JSON.stringify(r)}),e.next=4,(0,g.z)("/api/bg/freight/user/signSvc/pay",L(L({},r),{},{parent_order_sn:n,serial_no:t}),c.Cb).catch((function(e){return(0,m.A)({event:"signSvcPay_error",data:JSON.stringify(e)}),Promise.reject(e)}));case 4:a=e.sent,i=(s=a||{}).tradePaySn,l=s.data,u=s.parentOrderInfo,p=s.needRollbackSource,h=s.errorPayload,null!=a&&a.needRollbackSource&&((0,m.A)({event:"signSvcCancelPayWhenNeedRollback"}),setTimeout((function(){return H({parentOrderSn:n,serialNo:t})}),0)),v=(l||{}).payStatus,e.t0=v,e.next=e.t0===d.f6.SUCCESS?11:e.t0===d.f6.FAIL?13:e.t0===d.f6.PROCESSING?15:17;break;case 11:return A=d.hq.Success,e.abrupt("break",19);case 13:return A=d.hq.Fail,e.abrupt("break",19);case 15:return A=d.hq.Processing,e.abrupt("break",19);case 17:return A=d.hq.Invalid,e.abrupt("break",19);case 19:return _={resultCode:A,response:h?{errorPayload:h}:l,orderInfo:{tradePaySn:i,parentOrderInfoList:[L(L({},u),{},{tradePaySn:i})]},needRollbackSource:p},(0,m.A)({event:"signSvcPay_result",data:JSON.stringify(_)}),e.abrupt("return",_);case 22:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()};function Y(e){var n=e.parentOrderSn,t=+(0,u.Xe)(location.href)[D];t&&R.registerCustomCreateAndPay({payUIScene:A.B_.SIGN_ON_DELIVERY_PAY,customCreateAndPay:F({parentOrderSn:n,serialNo:t}),customCheckOrderStatus:W({parentOrderSn:n,serialNo:t})})}function U(){return U=(0,a.A)(o().mark((function e(n){var t,s,d,f,_,S,y,b,E,O,C,P,T,N,w,I;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y=n.parentOrderSn,b=n.refreshPageData,E=-1,O=!1,C=function(){var e=(0,a.A)(o().mark((function e(n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.z)("/api/bg/freight/user/signSvc/query_cashier_list",{parent_order_sn:y,serial_no:E,payment_extra:L(L({},(0,p.A)({userAgent:window.navigator.userAgent})),n)},c.Cb).catch((function(){return null}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),P=function(){},T=!1,N=function(){var e=(0,a.A)(o().mark((function e(n){var t,r,a,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=C(n),e.next=3,(0,g.z)("/api/bg/freight/user/signSvc/query_pay_window_info",{parent_order_sn:y,serial_no:E},c.Cb).catch((function(e){var n=null==e?void 0:e.errorPayload;return n&&(T=!0,(0,v.A)({errorPayload:n},"",{onClose:P})),null}));case 3:if(null!=(a=e.sent)&&a.success){e.next=7;break}return(0,m.A)({event:"query_pay_window_info_error"}),e.abrupt("return",null);case 7:return e.next=9,r;case 9:if(null!=(s=e.sent)&&null!==(t=s.channelList)&&void 0!==t&&t.length){e.next=14;break}return(0,m.A)({event:"signSvcCancelPayWhenGetPaymentVoFail"}),H({parentOrderSn:y,serialNo:E}),e.abrupt("return",null);case 14:return e.abrupt("return",L(L({},a),{},{paymentVo:s}));case 15:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),(0,m.A)({event:"pre_calc_start"}),e.next=10,(0,g.z)("/api/bg/freight/user/signSvc/pre_calc",{parent_order_sn:y},c.Cb).catch((function(e){var n=null==e?void 0:e.errorPayload;return n&&(T=!0,(0,v.A)({errorPayload:n},"",{onClose:P})),null}));case 10:if(e.t1=t=e.sent,e.t0=null===e.t1,e.t0){e.next=14;break}e.t0=void 0===t;case 14:if(!e.t0){e.next=18;break}e.t2=void 0,e.next=19;break;case 18:e.t2=t.serialNo;case 19:if(E=e.t2){e.next=23;break}return(0,m.A)({event:"pre_calc_failed"}),e.abrupt("return");case 23:return e.next=25,N();case 25:if((w=e.sent)||T){e.next=29;break}return(0,l.A)(i.Ay.t("bec-fe.web-pay:retryPaymentFailed")),e.abrupt("return");case 29:(0,h.ci)((0,u.rE)((0,r.A)({},D,E),location.href)),R.registerCustomCreateAndPay({payUIScene:A.B_.SIGN_ON_DELIVERY_PAY,customCreateAndPay:F({parentOrderSn:y,serialNo:E}),customCheckOrderStatus:W({parentOrderSn:y,serialNo:E})},!0),I=function(e){return null==b||b(),C(e)},P=R.showPaymentList({payUIProps:L(L({},null==w?void 0:w.signSvcPayWindowDto),{},{cashierTitle:null==w||null===(s=w.paymentVo)||void 0===s?void 0:s.cashierTitle,isPopup:!1,parentOrderSn:y}),payProps:{scene:A.B_.SIGN_ON_DELIVERY_PAY,paymentVo:null==w?void 0:w.paymentVo,payTicket:(null==w||null===(d=w.paymentVo)||void 0===d?void 0:d.payTicket)||"",cardPayIframe3ds:!0,payProcessUrl:location.href,paySuccessUrl:location.href,totalAmount:null==w||null===(f=w.paymentVo)||void 0===f||null===(_=f.payAmountInfo)||void 0===_?void 0:_.totalAmount,onPayStarted:function(){return O=!0}},payChannelListFetcher:I,payChannelList:(null==w||null===(S=w.paymentVo)||void 0===S?void 0:S.channelList)||[],onDispose:function(){O||((0,m.A)({event:"signSvcCancelPayWhenCloseDialog"}),H({parentOrderSn:y,serialNo:E}))}});case 33:case"end":return e.stop()}}),e)}))),U.apply(this,arguments)}var G=(0,_.A)((function(e){return U.apply(this,arguments)}))},47137:function(e,n,t){"use strict";t.r(n),t.d(n,{observable:function(){return r.sH},observer:function(){return a.PA}});var r=t(37451),a=t(47116)},9594:function(e,n,t){"use strict";t.d(n,{A:function(){return s}});t(52675),t(2008),t(83851),t(44114),t(23500),t(81278),t(67945),t(84185);var r=t(61877);t(79432),t(72712),t(26099);function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function s(e){var n=e.initPage,s=e.defaultTasks;if("1"===window._SPLIT_REQUIRE_FLAG_){var o=t(5789).A,i=function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){(0,r.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({$react:function(){return t(33514)},$reactDOM:function(){return t(89243)},$mobx:function(){return t(47137)},$18n:function(){return t(40764)}},s);o(i,Object.keys(s)).then((function(e){return n(e)}))}else n(Object.keys(s).reduce((function(e,n){var t=s[n]();return e[n]=t,e}),{}))}},5789:function(e,n,t){"use strict";var r=t(74533),a=t(11286),s=t.n(a),o=(t(26099),t(3362),t(23500),t(79432),t(62062),t(74423),t(21699),function(e){return new Promise((function(n){if("undefined"==typeof window||"undefined"==typeof MessageChannel)return e.forEach((function(e){return e()})),void n();window._SPLIT_REQUIRE_WORK_="1";var t=window._SPLIT_REQUIRE_CONFIG_||{},r=t.strategy,a=Math.max(5,t.interval||5),s=new MessageChannel,o=0;var i=!1;function l(){try{return i=i||function(){for(var e=window.__fsImgItems||[],n=0;n<e.length;n++)if(!e[n].time)return!1;return!0}()}catch(e){return!0}}function c(e){return!l()&&Date.now()-e>a}var u=function(){var e,n;return"1"===String(r)&&(null===(e=navigator.scheduling)||void 0===e||null===(n=e.isInputPending)||void 0===n?void 0:n.call(e))};function d(){for(var t=Date.now();void 0!==e[o];)if(e[o++](),u()&&Date.now()-t>a||c(t))return void s.port1.postMessage(null);n()}s.port2.onmessage=function(){d()},u()||!l()?s.port1.postMessage(null):d()}))});n.A=function(){var e=(0,r.A)(s().mark((function e(n,t){var r,a,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},a=Object.keys(n),i=a.map((function(e){return function(){var a=n[e]();t.includes(e)&&(r[e]=a)}})),e.next=5,o(i);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()},53074:function(e,n,t){"use strict";t.d(n,{A:function(){return p}});var r=t(33514),a=t(32485),s=t.n(a),o=t(97582),i=t(87837),l=t(66998),c=t(92313),u=t(45484),d=t.n(u);function p(e){var n=e.onClick,t=(0,o.B)("bgt_order_checkout").t;return r.createElement(i.Rp,{page_el_sn:c.t.PAY_WITH_PAYPAL},r.createElement("div",{className:s()(d().button,"flex-box","align-items-center","justify-content-center"),onClick:n,role:"button",tabIndex:0},t("payWith"),r.createElement(l.Ay,{className:d().paypalImg,src:"https://aimg.kwcdn.com/upload_aimg/transaction/62f87584-0c6a-4a40-a91c-73c4df4be5b4.png.slim.png",alt:""}),r.createElement("div",{className:d().recommended},t("recommended"))))}},92313:function(e,n,t){"use strict";t.d(n,{t:function(){return r}});var r=function(e){return e[e.POPUP=206356]="POPUP",e[e.CLOSE_BTN=206359]="CLOSE_BTN",e[e.SWITCH_PAYMENT_BTN=206361]="SWITCH_PAYMENT_BTN",e[e.TRY_AGAIN_BTN=206363]="TRY_AGAIN_BTN",e[e.PAY_WITH_PAYPAL=208029]="PAY_WITH_PAYPAL",e}({})},39351:function(e,n,t){"use strict";t(62062),t(2008),t(26099);var r=t(33514),a=t(97582),s=t(46694),o=t(80493),i=t.n(o);n.A=function(e){var n=((0,s.Sz)()||{}).isRTL,t=(0,a.B)("sumer_global").t,o=e.fields,l=e.separator,c=e.useSeparator,u=void 0===c||c,d=t("comma",{defaultValue:","});return r.createElement(r.Fragment,null,o.filter(Boolean).map((function(e,t){return r.createElement(r.Fragment,null,u&&0!==t?l||d:null,n?r.createElement("span",{className:i().isolate},e):e)})))}},75746:function(e,n,t){"use strict";t.d(n,{N5:function(){return k},Ay:function(){return L}});t(79432),t(52675),t(2008),t(26099),t(83851),t(44114),t(23500),t(81278),t(67945),t(84185);var r=t(61877),a=t(33514),s=t(32485),o=t.n(s),i=t(25232),l=t(65309),c=t(97582),u=t(99117),d=t(99229),p=t(8565),m=t(51688),f=t(56899),h=t(27403),v=t(12600),A=t(63580),g=t(17021),_=t(14242),S=t(56687),y=t(95789),b=t(77900),E=t(16895),O=t(27540),C=t.n(O),P=["onCancel","onClose","onConfirm","desc","originalAddressText","suggestedAddressText"],T=function(e){var n=e.onCancel,t=e.onClose,r=e.onConfirm,s=e.desc,i=e.originalAddressText,l=e.suggestedAddressText,u=(0,S.A)(e,P),d=(0,c.B)("bgt_order_detail").t;return a.createElement(b.TM,(0,_.A)({title:d("change-incorrect-address.change-address"),titleClassName:C().title,className:C().dialog,containerClassName:C().dialogContainer,onClose:t,renderContent:function(){return a.createElement("div",{className:C().wrapper},a.createElement("div",{className:C().textWrapper},a.createElement(g.Ay,{icon:g.pm,className:C().icon}),a.createElement("div",{className:C().text},s||d("change-incorrect-address.desc"))),a.createElement("div",{className:C().addressWrapper},a.createElement("div",{className:o()(C().originAddress,C().addressItem)},a.createElement("span",{className:C().title},d("change-incorrect-address.original-address")),!!i&&a.createElement("span",{className:C().address},(0,E.A)(i))),a.createElement("div",{className:o()(C().suggestAddress,C().addressItem)},a.createElement("span",{className:C().title},d("change-incorrect-address.suggested-address")),!!l&&a.createElement("span",{className:C().address},(0,E.A)(l)))))},onConfirm:r,confirmButtonLabel:d("change-incorrect-address.confirm-and-change"),cancelButtonLabel:d("change-incorrect-address.change-manaually"),onCancel:n},u))},N=t(74589),w=t.n(N);function I(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function x(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?I(Object(t),!0).forEach((function(n){(0,r.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):I(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var k=function(e){return e[e.ADDRESS_ABNORMAL=-2]="ADDRESS_ABNORMAL",e[e.CHANGE_TAX_ID=-1]="CHANGE_TAX_ID",e[e.RIGHT=0]="RIGHT",e[e.ABSOLUTE_WRONG_HAS_REC_ADDRESS=1]="ABSOLUTE_WRONG_HAS_REC_ADDRESS",e[e.ABSOLUTE_WRONG_NO_REC_ADDRESS=2]="ABSOLUTE_WRONG_NO_REC_ADDRESS",e[e.SUSPECT_WRONG_HAS_REC_ADDRESS=3]="SUSPECT_WRONG_HAS_REC_ADDRESS",e[e.SUSPECT_WRONG_NO_REC_ADDRESS=4]="SUSPECT_WRONG_NO_REC_ADDRESS",e[e.NO_EXIST_CHECKED_INFO=5]="NO_EXIST_CHECKED_INFO",e}({}),L=function(e){var n,t,s,S,b=e.onConfirmSuspectAddress,E=e.onConfirmUseRecAddress,O=e.onClickChangeManually,C=e.onClickEditTaxId,P=e.onClickAddressAbnormalEditBtn,N=e.hasTopLine,I=e.hasBottomLine,L=e.title,R=e.addressCorrectType,D=e.originalAddressText,H=e.suggestedAddressText,B=e.parentOrderSn,j=e.addressSnapshotId,M=e.forceRow,W=e.forceColumn,F=e.newStyle,Y=e.newStyleV2,U=e.taxNumberCorrectionVo,G=e.addressAbnormalVo,K=e.changeType,V=e.directChangeManully,q=e.changeButtonText,z=e.correctButtonText,X=e.children,$={type:R,parent_order_sn:B},J=!(null==U||!U.title||!C),Q=!(null==G||!G.contentRich||!P),Z=(0,a.useMemo)((function(){return Q?k.ADDRESS_ABNORMAL:J?k.CHANGE_TAX_ID:R}),[R,Q,J]),ee=(0,a.useMemo)((function(){return Q&&null!=G&&G.contentRich?null==G?void 0:G.contentRich:J?null==U?void 0:U.title:L}),[null==G?void 0:G.contentRich,Q,J,null==U?void 0:U.title,L]),ne=Z===k.ABSOLUTE_WRONG_HAS_REC_ADDRESS||Z===k.SUSPECT_WRONG_HAS_REC_ADDRESS,te=K===h.gK.MULTIPLE_ORDINARY_CHANGE_ADDRESS||K===h.gK.MULTIPLE_TAX_CHANGE_ADDRESS||K===h.gK.MULTIPLE_SHOP_CHANGE_ADDRESS,re=ne&&te,ae=function(){var e="IncorrectAddressModuleChangeBtnClick";if(Q?e="IncorrectAddressModuleAddressAbnormalClick":J&&(e="IncorrectAddressModuleEditTaxIdBtnClick"),(0,A.Ay)(e,{customFields:{type:Z,parentOrderSn:B}}),V)null==O||O();else if(ne){(0,u.OS)(x({page_el_sn:204354,op:"impr"},$)),(0,u.OS)(x({page_el_sn:204355,op:"impr"},$)),(0,u.OS)(x({page_el_sn:204356,op:"impr"},$));var n=function(e){var n,t=e||{},r=t.onClose,s=t.onConfirm,o=t.onCancel;return n=(0,y.A)(a.createElement(a.Suspense,{fallback:null},a.createElement(T,(0,_.A)({onClose:function(){var e;null===(e=n)||void 0===e||e(),null==r||r()},onConfirm:function(){null==s||s()},onCancel:function(){null==o||o()}},e))),{})}({onConfirm:function(){(0,A.Ay)("IncorrectAddressModuleUseRecAddress",{customFields:{type:Z,parentOrderSn:B}}),(0,u.OS)(x({page_el_sn:204355,op:"click"},$)),null==E||E().then((function(e){e&&(null==n||n())}))},onCancel:function(){(0,A.Ay)("IncorrectAddressModuleChangeManually",{customFields:{type:"".concat(Z),parentOrderSn:B}}),(0,u.OS)(x({page_el_sn:204356,op:"click"},$)),null==O||O().then((function(e){e&&(null==n||n())}))},onClose:function(){(0,u.OS)(x({page_el_sn:204354,op:"click"},$)),(0,A.Ay)("IncorrectAddressModuleCloseDialog",{customFields:{type:"".concat(Z),parentOrderSn:B}}),null==n||n()},desc:L||"",originalAddressText:D,suggestedAddressText:H})}else Q&&P?((0,A.Ay)("IncorrectAddressModuleShowAddressAbnormal",{customFields:{type:null==G?void 0:G.type,parentOrderSn:B},customTags:{logLevel:v.$b.normal,bizScene:f.Yn.editAddress}}),null==P||P()):J&&C?((0,A.Ay)("IncorrectAddressModuleEditTaxId",{customFields:{type:"".concat(Z),parentOrderSn:B}}),null==C||C()):((0,A.Ay)("IncorrectAddressModuleDirectChangeManually",{customFields:{type:"".concat(Z),parentOrderSn:B}}),null==O||O())},se=(0,a.useRef)(null);(0,d.j)(se,ae);var oe=function(){(0,A.Ay)("IncorrectAddressModuleConfirmSuspectAddress",{customFields:{type:Z,parentOrderSn:B}}),null==b||b()},ie=(0,a.useRef)(null);(0,d.j)(ie,oe);var le=(0,c.B)("bgt_order_detail").t;(0,a.useEffect)((function(){(0,A.Ay)("IncorrectAddressModuleShow",{customFields:{type:Z,parentOrderSn:B}}),Q?(0,A.Ay)("IncorrectAddressModuleShowAddressAbnormal",{customFields:{type:null==G?void 0:G.type,parentOrderSn:B},customTags:{logLevel:v.$b.normal,bizScene:f.Yn.editAddress}}):J?(0,A.Ay)("IncorrectAddressModuleShowEditTaxId",{customFields:{type:Z,parentOrderSn:B}}):"number"!=typeof Z||Z===k.RIGHT||Z===k.NO_EXIST_CHECKED_INFO||re?re&&(0,A.Ay)("IncorrectAddressModuleCombinedPackagedOrderHasRecAddress",{customFields:{type:Z,parentOrderSn:B},customTags:{logLevel:v.$b.checkpoint,bizScene:f.Yn.editAddress}}):(0,A.Ay)("IncorrectAddressModuleShowWithIncorrect",{customFields:{type:Z,parentOrderSn:B}})}),[null==G?void 0:G.type,j,Z,Q,J,re,B]);var ce=Z===k.SUSPECT_WRONG_HAS_REC_ADDRESS||Z===k.SUSPECT_WRONG_NO_REC_ADDRESS,ue=(0,a.useMemo)((function(){var e,n;return Q&&null!=G&&null!==(e=G.buttonVo)&&void 0!==e&&e.buttonDesc?null==G||null===(n=G.buttonVo)||void 0===n?void 0:n.buttonDesc:le(J?"edit":!F||!ce&&M?"change-incorrect-address.change":"change-incorrect-address.change-address-desc")}),[null==G||null===(n=G.buttonVo)||void 0===n?void 0:n.buttonDesc,M,Q,J,ce,F,le]),de=(0,a.useCallback)((function(e){return(0,m.A)(e,{enableConvertRTLStyles:!0,onBeforeForward:function(){(0,A.Ay)("changeTaxIdLinkClick",{customFields:{type:Z,parentOrderSn:B}})},getExtraClassName:function(e){var n,t;if("iconfont"===(null==e?void 0:e.name)&&""===(null==e||null===(n=e.children)||void 0===n||null===(t=n[0])||void 0===t?void 0:t.data))return w().rightArrow}})}),[Z,B]);return re||Z===k.RIGHT||Z===k.NO_EXIST_CHECKED_INFO||!Z?null:a.createElement("div",{className:o()((t={},(0,r.A)(t,w()["container__top-line"],N),(0,r.A)(t,w()["container__bottom-line"],I),t)),onClick:function(e){var n;return null==e||null===(n=e.stopPropagation)||void 0===n?void 0:n.call(e)}},a.createElement("div",{className:o()(w().wrapper,(s={},(0,r.A)(s,w().newWrapper,F),(0,r.A)(s,w().wrapper__suspectedAddress,!!ce),(0,r.A)(s,w().wrapper__forceRow,M),(0,r.A)(s,w().wrapper__forceColumn,W),s))},a.createElement("div",{className:o()(w().titleWrapper,!!ce&&!M&&w().titleWrapper__suspectedAddress)},a.createElement(p.A,{page_el_sn:204349,others:$},a.createElement("div",{className:o()(w().text,(S={},(0,r.A)(S,w().normalText,J||Q),(0,r.A)(S,w().textLeft,Y),S))},Q?null:a.createElement(l.d,null,a.createElement(g.Ay,{icon:F?g.pm:g.Gm,className:o()(w().icon,(0,r.A)({},w().normalIcon,J))})),(0,i.Ay)(ee||le("change-incorrect-address.text"),{replace:de})))),X,a.createElement("div",{className:o()(w().btnSection,"changeIncorrectAddressBtnSection"),style:Y?{width:"100%"}:{}},a.createElement(p.A,{page_el_sn:204350,others:$},a.createElement("div",{className:o()(w().btn,Y&&w().btnV2,w().changeBtn,!!ce&&w().changeBtn__suspectedAddress,M&&w().changeBtn__forceRow,"changeAddressBtn",!!ce&&"changeBtn__suspectedAddress"),ref:se,role:"link",tabIndex:0,onClick:function(){return ae()}},q||ue)),!!ce&&a.createElement(p.A,{page_el_sn:204351,others:$},a.createElement("div",{className:o()(w().btn,Y&&w().btnV2,w().confirmBtn,"confirmCorrectBtn"),ref:ie,role:"link",tabIndex:0,onClick:function(){return null==oe?void 0:oe()}},z||le("change-incorrect-address.address-is-correct"))))),null!=U&&U.taxErrorLinkText?a.createElement("span",{className:w().taxErrorLinkText},(0,i.Ay)((null==U?void 0:U.taxErrorLinkText)||"",{replace:de})):null)}},10858:function(e,n,t){"use strict";var r=t(33514),a=t(65309),s=t(14511),o=t(59717),i=t(82370),l=t(10147),c=t(12600),u=t(63580),d=t(29227),p=t(78016),m=t.n(p),f=function(e){var n=e.data,t=e.onClose,s=e.isRTL,p=n||{},f=p.title,h=p.subTitle1,v=p.subText1,A=p.subTitle2,g=p.subText2,_=p.button,S=p.signWebUrl,y=(0,r.useCallback)((function(){(0,u.Ay)("SignServicePopup_show",{customTags:{logLevel:c.$b.action,logOperate:c.pp.rare}}),S&&(0,d.MJ)(S,{needForceWeb:!0,openTarget:"_blank"}),t()}),[t,S]);return(0,r.useEffect)((function(){n||(0,u.Ay)("SignServicePopup_show",{customTags:{logOperate:c.pp.rare}})}),[n]),n?r.createElement(o.A,{dialogProps:{className:m().container}},r.createElement(o.A.CloseButton,{onClick:t}),r.createElement(o.A.StaticContainer,null,r.createElement(r.Fragment,null,r.createElement("div",{className:m().titleWrapper},r.createElement("div",{className:m().iconWrapper},r.createElement(i.Ay,{className:!!s&&m().rtlImg,src:"https://aimg.kwcdn.com/upload_aimg/logistics/7b7bf7c0-6dfb-4bac-a3c5-567bafa643c5.png.slim.png",alt:""})),r.createElement("span",null,f||"")),r.createElement("div",{className:m().contentMask}))),r.createElement(o.A.ScrollContainer,{widthMode:"full",className:m().contentCls,scrollClassName:m().contentScrollCls},r.createElement("div",{className:m().contentWrapper},r.createElement("div",{className:m().item},r.createElement("div",{className:m().subtitleWrapper},r.createElement(a.d,null,r.createElement("div",{"aria-hidden":!0,className:m().dotIcon})),r.createElement("span",{className:m().subtitle},h)),r.createElement("div",{className:m().desc},v)),r.createElement("div",{className:m().item},r.createElement("div",{className:m().subtitleWrapper},r.createElement(a.d,null,r.createElement("div",{"aria-hidden":!0,className:m().dotIcon})),r.createElement("span",{className:m().subtitle},A)),r.createElement("div",{className:m().desc},g)))),r.createElement(o.A.StaticContainer,null,r.createElement(l.A,{type:"border",size:"md",className:m().bottomBtn,onClick:y},_))):null};n.A=(0,s.Xc)((0,r.memo)(f))},33105:function(e,n,t){"use strict";t.d(n,{A:function(){return N}});t(79432),t(52675),t(83851),t(44114),t(23500),t(81278),t(67945),t(84185);var r=t(61877),a=t(74533),s=t(6356),o=t(11286),i=t.n(o),l=(t(28706),t(2008),t(26099),t(62062),t(33514)),c=t(97582),u=t(32485),d=t.n(u),p=t(13852),m=t(8587),f=t(82370),h=t(17021),v=t(66462),A=t(29227),g=t(66998);function _(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function S(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?_(Object(t),!0).forEach((function(n){(0,r.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function y(e){var n=e.content;return l.createElement(l.Fragment,null,null==n?void 0:n.map((function(e,n){var t=e.type,r=e.text,a=e.color,s=(e.size,e.pic_url),o=e.height,i=e.width,c=e.weight,u=(e.lineHeight,{color:a,fontSize:14,lineHeight:"21px",fontWeight:2===c?500:400});return 2===t?l.createElement(g.Ay,{key:n,style:S(S({},u),{},{width:i,height:o}),src:s||""}):l.createElement("span",{style:u,key:n},"".concat(r," "))})))}var b=(0,l.memo)(y),E=t(82259),O=t.n(E);function C(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function P(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?C(Object(t),!0).forEach((function(n){(0,r.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):C(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function T(e){var n=e.paymentInfo,t=e.style,r=e.utils,o=(0,c.B)("sumer_global").t,u=n||{},g=u.cardInfo,_=u.errorTips,S=u.paymentErrorSubContent,y=u.disputeOrderList,E=u.editBillingAddress,C=g||{},T=C.cardBrandIcon,N=C.cardMaskNum,w=!!T&&!!T,I=(0,l.useState)(null==n?void 0:n.billingAddress),x=(0,s.A)(I,2),k=x[0],L=x[1],R=(0,m.w)((function(e){(0,v.q)(),(0,A.MJ)((0,p.rE)({parent_order_sn:e},"/bgt_order_detail.html"))}));if(!(w||S||null!=y&&y.length))return null;var D=k||{},H=D.addressLine1,B=void 0===H?"":H,j=D.addressLine2,M=void 0===j?"":j,W=D.regionName1,F=void 0===W?"":W,Y=D.regionName2,U=void 0===Y?"":Y,G=D.regionName3,K=void 0===G?"":G,V=D.postCode,q=void 0===V?"":V,z=D.name,X=D.phoneCode,$=D.displayMobile,J=void 0===$?"":$,Q=D.displayAddressItem,Z=X?"+".concat(X):"",ee="".concat(z," ").concat(Z," ").concat(J),ne=[U,q].filter((function(e){return!!e})).join(" "),te="".concat(K," ").concat(ne," ").concat(F),re=function(){var e=(0,a.A)(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==r||!r.editBillingAddress){e.next=6;break}return e.next=3,null==r?void 0:r.editBillingAddress();case 3:n=P(P({},n=e.sent),{},{displayMobile:(t=n.displayMobile,10!==(null==t?void 0:t.length)?t:"(".concat(t.substr(0,3),") ").concat(t.substr(3,3),"-").concat(t.substr(6)))}),L(n);case 6:case"end":return e.stop()}var t}),e)})));return function(){return e.apply(this,arguments)}}();return l.createElement("div",{className:d()(O().wrap,!g&&O().noCard,(null==y?void 0:y.length)&&O().orderListPadding),style:t},!!w&&l.createElement(l.Fragment,null,l.createElement("div",{className:O().cardInfo},l.createElement(f.Ay,{className:O().cardLogo,src:T}),l.createElement("div",{className:O().cardDetails},l.createElement("p",null,N))),!!k&&l.createElement(l.Fragment,null,l.createElement("div",{className:O().divider}),l.createElement("div",{className:O().billingAddress},l.createElement("div",{className:O().billingAddressTitle},o("card.billingAddress")),!!E&&l.createElement("div",{className:O().billingAddressEdit,onClick:re},o("Edit")),null!=Q&&Q.length?l.createElement(l.Fragment,null,Q.map((function(e,n){return l.createElement("div",{className:0===n?O().billlingAddressName:O().billlingAddressRegion,key:n},e.map((function(e){return e.text})).join(""))}))):l.createElement(l.Fragment,null,l.createElement("div",{className:O().billlingAddressName},ee),l.createElement("div",{className:O().billlingAddressRegion},B),M?l.createElement("div",{className:O().billlingAddressRegion},M):null,l.createElement("div",{className:O().billlingAddressRegion},te)))),!!_&&l.createElement(l.Fragment,null,l.createElement("div",{className:O().divider}),l.createElement("div",{className:O().error},l.createElement(h.c5,{className:O().warn}),_))),!(null==S||!S.length)&&l.createElement("div",{style:w?{marginBottom:-3,marginTop:2,lineHeight:"21px"}:{lineHeight:"21px"}},l.createElement(b,{content:S})),!(null==y||!y.length)&&l.createElement("div",null,l.createElement("div",{className:O().disputeOrderTitle},o("disputeOrderTitle")),(y||[]).map((function(e){return l.createElement("div",{className:d()(O().order,"cursorPointer"),onClick:function(){return R(e)}},e,l.createElement(h.X8,{className:O().rightArrow}))}))))}var N=(0,l.memo)(T)},32838:function(e,n,t){"use strict";t.d(n,{_:function(){return a},j:function(){return s}});var r=t(72635),a=function(e){return e.TOAST="toast",e.NOTHING="nothing",e.ALERT="alert",e.CONFIRM="confirm",e}(a||{});function s(){return{viewStyle:a.ALERT,viewObject:{title:"",message:r.Ay.t("OrderProcessErr",{ns:"bec-fe.web-pay"})}}}},90782:function(e,n,t){"use strict";t.d(n,{X2:function(){return F},_D:function(){return L._},Ay:function(){return U}});t(79432),t(52675),t(2008),t(26099),t(83851),t(44114),t(23500),t(81278),t(67945),t(84185);var r=t(61877),a=(t(74423),t(21699),t(33110),t(33514)),s=t(32485),o=t.n(s),i=t(8515),l=t(50453),c=t(47743),u=t(52248),d=t(77900),p=t(66462),m=t(92313),f=t(53074),h=t(95789),v=t(97582),A=t(1528),g=t(59661),_=t(8565),S=t(10147),y=(t(62062),t(32515)),b=t.n(y);function E(e){var n=e.extraMessage;if(!n)return null;var t=n.messageDescribe,r=n.messageList,s=void 0===r?[]:r;return a.createElement(a.Fragment,null,a.createElement("div",{className:b().divider}),a.createElement("div",{className:b().total},t),s.map((function(e){return a.createElement("div",{className:b().item},e)})))}var O=t(33105),C=(t(34782),t(66998)),P=t(66360),T=t.n(P);function N(e){var n=e.pictureList,t=void 0===n?[]:n;if(null==t||!t.length)return null;var s="+".concat(t.length-4);return a.createElement("div",{className:T().picContainer},t.slice(0,4).map((function(e,n){return a.createElement("div",{className:o()(T().item,(0,r.A)({},T().cover,n<3||4===t.length&&3===n)),key:e},a.createElement(C.Ay,{className:T().img,src:e}),3===n&&t.length>4&&a.createElement("div",{className:T().mask},s))})))}var w=t(69403),I=t.n(w),x={1:A.el.main,2:A.el.border,3:A.el.border};function k(e){var n,t,r,s,o,i=e.onOk,l=e.onCancel,u=e.onRetry,d=e.onClose,p=e.errorPayload,h=e.utils,y=(0,v.B)("sumer_global").t,b=null==p?void 0:p.viewObject,C=b.message,P=b.okLabel,T=b.cancelLabel,w=b.retryLabel,k=b.extraMessage,L=(null==p||null===(n=p.paymentInfo)||void 0===n?void 0:n.errorPayloadToastTitle)||(null==p?void 0:p.viewObject.title)||"",R=(null==p||null===(t=p.viewObject)||void 0===t?void 0:t.onOk)||{},D=R.type,H=R.style,B=R.pictureList,j=void 0===B?[]:B,M=(null==p||null===(r=p.viewObject)||void 0===r?void 0:r.onCancel)||{},W=M.type,Y=M.style,U=(null==p||null===(s=p.viewObject)||void 0===s?void 0:s.onRetry)||{},G=U.type,K=U.style,V=[F.PAY_WITH_PAYPAL,F.PAY_PAY_WITH_PAYPAL].includes(D),q=[F.PAY_WITH_PAYPAL,F.PAY_PAY_WITH_PAYPAL].includes(W),z=[F.PAY_WITH_PAYPAL,F.PAY_PAY_WITH_PAYPAL].includes(G),X=null;D===F.PAY_SWITCH_PAYMENT_METHOD?X=m.t.SWITCH_PAYMENT_BTN:[F.PAY_TRY_AGAIN,F.PAY_TRY_AGAIN_1].includes(D)&&(X=m.t.TRY_AGAIN_BTN);var $=null;W===F.PAY_SWITCH_PAYMENT_METHOD?$=m.t.SWITCH_PAYMENT_BTN:[F.PAY_TRY_AGAIN,F.PAY_TRY_AGAIN_1].includes(W)&&($=m.t.TRY_AGAIN_BTN);var J=null;G===F.PAY_SWITCH_PAYMENT_METHOD?J=m.t.SWITCH_PAYMENT_BTN:[F.PAY_TRY_AGAIN,F.PAY_TRY_AGAIN_1].includes(G)&&(J=m.t.TRY_AGAIN_BTN);var Q=P;P||T||w||(Q=y("ok"));var Z=(null===(o=p.paymentInfo)||void 0===o?void 0:o.notChargedContent)||{},ee=Z.titleAttachedText,ne=void 0===ee?"":ee,te=Z.messageAttachedText,re=void 0===te?"":te,ae=!(!L&&!ne),se=!(!C&&!re);return(0,a.useEffect)((function(){(0,c.A)({event:"StdErrorPayloadDialog",data:JSON.stringify({errorPayload:p})})}),[]),a.createElement(g.Ay,{onClick:d},a.createElement("div",{className:I().container},!!ae&&a.createElement("div",{className:I().title},L,a.createElement("span",{className:I().attachText},ne)),!!se&&a.createElement("div",{className:I().message},C,a.createElement("span",{className:I().attachText},re)),a.createElement(N,{pictureList:j}),a.createElement(E,{extraMessage:k}),a.createElement(O.A,{paymentInfo:p.paymentInfo,utils:h}),V?a.createElement(f.A,{onClick:i}):null,Q&&!V?a.createElement(_.A,{page_el_sn:X},a.createElement(S.A,{type:x[H],className:I().button,onClick:i},Q)):null,q?a.createElement(f.A,{onClick:l}):null,T&&!q?a.createElement(_.A,{page_el_sn:$},a.createElement(S.A,{type:x[Y]||A.el.border,className:I().button,onClick:l},T)):null,z?a.createElement(f.A,{onClick:u}):null,w&&!z?a.createElement(_.A,{page_el_sn:J},a.createElement(S.A,{type:x[K]||A.el.border,className:I().button,onClick:u},w)):null))}var L=t(32838),R=t(61451),D=t.n(R);function H(e){var n=e.extraMessage;if(!n)return null;var t=n.messageDescribe,r=n.messageList,s=void 0===r?[]:r;return a.createElement(a.Fragment,null,a.createElement("div",{className:D().total},t),s.map((function(e){return a.createElement("div",{className:D().item},a.createElement("span",{className:D().dot},"·"),e)})))}var B=t(52579),j=t.n(B);function M(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function W(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?M(Object(t),!0).forEach((function(n){(0,r.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):M(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var F=function(e){return e[e.NOTHING=0]="NOTHING",e[e.FORWARD=1]="FORWARD",e[e.BACK=2]="BACK",e[e.GO_HOME=3]="GO_HOME",e[e.RELOAD=4]="RELOAD",e[e.REFRESH=7]="REFRESH",e[e.TRY_ANOTHER_CARD=8]="TRY_ANOTHER_CARD",e[e.PAY_WITH_PAYPAL=9]="PAY_WITH_PAYPAL",e[e.FORWARD2=10]="FORWARD2",e[e.OVERWRITE=1e4]="OVERWRITE",e[e.PAY_TRY_ANOTHER_CARD=101]="PAY_TRY_ANOTHER_CARD",e[e.PAY_SWITCH_PAYMENT_METHOD=102]="PAY_SWITCH_PAYMENT_METHOD",e[e.PAY_TRY_AGAIN=104]="PAY_TRY_AGAIN",e[e.PAY_EDIT_BILLING_ADDRESS=105]="PAY_EDIT_BILLING_ADDRESS",e[e.PAY_EDIT_CARD_INFORMATION=106]="PAY_EDIT_CARD_INFORMATION",e[e.PAY_TRY_AGAIN_1=109]="PAY_TRY_AGAIN_1",e[e.PAY_PAY_WITH_PAYPAL=110]="PAY_PAY_WITH_PAYPAL",e[e.TRY_ANOTHER_METHOD=113]="TRY_ANOTHER_METHOD",e[e.PAY_AVS_AUTH_THEN_PAY_AGAIN=114]="PAY_AVS_AUTH_THEN_PAY_AGAIN",e[e.EDIT_CARD_INFORMATION_WITH_CVV=115]="EDIT_CARD_INFORMATION_WITH_CVV",e[e.EDIT_BIRTH_DATE=116]="EDIT_BIRTH_DATE",e[e.EDIT_CVV_AND_PAY=117]="EDIT_CVV_AND_PAY",e[e.SPLIT_TP_PAY=118]="SPLIT_TP_PAY",e[e.SPLIT_TP_PAY_SWITCH_PAYMENT_METHOD=119]="SPLIT_TP_PAY_SWITCH_PAYMENT_METHOD",e[e.PAY_CARD_INSUFFICIENT=201]="PAY_CARD_INSUFFICIENT",e}(F||{});function Y(e){var n,t,a=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).actionHandlers,s=arguments.length>2?arguments[2]:void 0,o=(null==e?void 0:e.type)||0,i=null==e||null===(n=e.param)||void 0===n?void 0:n.url,c=(t={},(0,r.A)(t,F.FORWARD,(function(){(0,p.q)(),l.Ay.uniformForward(i)})),(0,r.A)(t,F.FORWARD2,(function(){(0,p.q)(),l.Ay.uniformForward(i)})),(0,r.A)(t,F.BACK,(function(){(0,p.q)(),l.Ay.back(i)})),(0,r.A)(t,F.RELOAD,(function(){(0,p.q)(),l.Ay.reload(i)})),(0,r.A)(t,F.REFRESH,(function(){(0,p.q)(),location.reload()})),t),u=(null==a?void 0:a[F.OVERWRITE])||(null==a?void 0:a[o])||c[o]||s;return u?function(n){return null==u?void 0:u(W(W({},n),e))}:u}var U=function(e,n){var t,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=(null==e?void 0:e.errorCode)||0,l=null==e?void 0:e.errorPayload;if(l){var p,m=l.viewStyle||L._.TOAST,f=l.viewObject||{},v=f.message||"",A=f.title||"";v||(A=A||"Server busy, please try again later. (".concat(s,")"));var g=function(e,n,t){var r=e||{},a=r.onShow,s=r.onOk,o=r.onCancel,i=r.onRetry;return{onShow:Y(a,n,null==t?void 0:t.onShow),onCancel:Y(o,n,null==t?void 0:t.onCancel),onOk:Y(s,n,null==t?void 0:t.onOk),onRetry:Y(i,n,null)}}(f,{actionHandlers:null==r?void 0:r.actionHandlers},null==r||null===(p=r.defaultActionHandlers)||void 0===p?void 0:p[s])||{},_=g.onOk,S=g.onCancel,y=g.onShow,b=g.onRetry,E=f.okLabel||"OK",O=f.cancelLabel||"Cancel",C=[L._.CONFIRM,L._.ALERT].includes(m),P=f.onOk&&(f.onOk.type===F.PAY_WITH_PAYPAL||f.onOk.type>=100),T=f.onCancel&&(f.onCancel.type===F.PAY_WITH_PAYPAL||f.onCancel.type>=100),N=f.onRetry&&(f.onRetry.type===F.PAY_WITH_PAYPAL||f.onRetry.type>=100);if(P||T||N||C)return function(e){var n=e.onOk,t=e.onCancel,r=e.onRetry,s=e.onClose,o=e.errorPayload,i=e.utils,l=function(){return null};return l=(0,h.A)(a.createElement(k,{errorPayload:o,onCancel:function(){l(),null==t||t()},onOk:function(){l(),null==n||n()},onRetry:function(){l(),null==r||r()},onClose:function(){var e;null==s||s(),null===(e=l)||void 0===e||e()},utils:i}),null)}({onOk:_||(null==r?void 0:r.onClose),onCancel:S?function(){return S(!0)}:null==r?void 0:r.onClose,onRetry:b||(null==r?void 0:r.onClose),errorPayload:l,onClose:null==r?void 0:r.onClose,utils:null==r?void 0:r.utils});switch(m){case L._.NOTHING:null==r||null===(t=r.onClose)||void 0===t||t.call(r);break;case L._.ALERT:null!=r&&r.newUI?(0,d.S7)({title:A,text:v,newUI:!0,confirmButtonLabel:E,renderContent:function(){return a.createElement(H,{extraMessage:null==f?void 0:f.extraMessage})},onConfirm:function(){var e;null==_||_(),null==r||null===(e=r.onClose)||void 0===e||e.call(r)},onClose:function(){var e;null==r||null===(e=r.onClose)||void 0===e||e.call(r)}}):(0,d.GQ)({title:A,text:v,buttonConfigs:{disableCloseButton:!1,disableCancel:!0,customCloseButton:a.createElement(u.HW,{className:j().close}),confirmClassName:j().confirmClassName,cancelClassName:j().cancelClassName},confirmButtonLabel:E,className:j().rootContainer,containerClassName:j().containerClassName,titleClassName:j().titleClassName,textClassName:j().textClassName,footerClassName:j().footerClassName,renderContent:function(){return a.createElement(H,{extraMessage:null==f?void 0:f.extraMessage})},onConfirm:function(){var e;null==_||_(),null==r||null===(e=r.onClose)||void 0===e||e.call(r)},onCancel:function(){var e;null==S||S({isButtonClick:!0}),null==r||null===(e=r.onClose)||void 0===e||e.call(r)},onClose:function(){var e;null==S||S(),null==r||null===(e=r.onClose)||void 0===e||e.call(r)}});break;case L._.CONFIRM:null!=r&&r.newUI?(0,d.GQ)({title:A,text:v,newUI:!0,onConfirm:function(){var e;null==_||_(),null==r||null===(e=r.onClose)||void 0===e||e.call(r)},onCancel:function(){var e;null==S||S(!0),null==r||null===(e=r.onClose)||void 0===e||e.call(r)},onClose:function(){var e;null==S||S(),null==r||null===(e=r.onClose)||void 0===e||e.call(r)},cancelButtonLabel:O,confirmButtonLabel:E}):(0,d.GQ)({title:A,text:v,buttonConfigs:{disableCloseButton:!1,customCloseButton:a.createElement(u.HW,{className:j().close}),confirmClassName:j().confirmClassName,cancelClassName:j().cancelClassName},className:o()(j().rootContainer,j().comfirmContainer),containerClassName:j().containerClassName,titleClassName:j().titleClassName,textClassName:j().textClassName,footerClassName:j().footerClassName,onConfirm:function(){var e;null==_||_(),null==r||null===(e=r.onClose)||void 0===e||e.call(r)},onCancel:function(){var e;null==S||S(!0),null==r||null===(e=r.onClose)||void 0===e||e.call(r)},onClose:function(){var e;null==S||S(),null==r||null===(e=r.onClose)||void 0===e||e.call(r)},cancelButtonLabel:O,confirmButtonLabel:E});break;default:(0,i.A)(A,{onClose:function(){var e;null==r||null===(e=r.onClose)||void 0===e||e.call(r),y&&y()}})}(0,c.A)({event:"errorPayload standard handler",data:JSON.stringify({errorPayload:l})})}else if(n)(0,i.A)(n,{onClose:function(){var e;return null==r||null===(e=r.onClose)||void 0===e?void 0:e.call(r)}});else{var w;null==r||null===(w=r.onClose)||void 0===w||w.call(r)}}},56408:function(e,n,t){"use strict";t(62062);var r=t(33514),a=t(97816),s=t.n(a);n.A=function(e){var n=e.addressArray,t=e.linkCharacters;return!(null==n||!n.length)&&r.createElement(r.Fragment,null,null==n?void 0:n.map((function(e,a){return r.createElement(r.Fragment,null,r.createElement("span",{key:"".concat(a),className:s().spanContainer},e),t&&a!==(null==n?void 0:n.length)-1?"".concat(t||" "," "):null)})))}},91074:function(e,n,t){"use strict";t.d(n,{n:function(){return r}});t(27495),t(90906);function r(e){return/^((?!chrome|android).)*safari/i.test(e)}},68123:function(e,n,t){"use strict";function r(e){try{return localStorage.getItem(e)}catch(e){return null}}function a(e,n){try{localStorage.setItem(e,n)}catch(e){}}function s(e){try{return sessionStorage.getItem(e)}catch(e){return null}}function o(e,n){try{sessionStorage.setItem(e,n)}catch(e){}}t.d(n,{Lg:function(){return r},W9:function(){return s},ZB:function(){return a},yt:function(){return o}})},89254:function(e,n,t){"use strict";t.d(n,{E:function(){return a}});var r=t(33514),a=r.useLayoutEffect;n.A=a},25418:function(e,n,t){"use strict";t(62062),t(50113),t(26099);var r=t(33514),a=t(32485),s=t.n(a),o=t(72635),i=t(14511),l=t(27092),c=t(10147),u=t(1528),d=t(39351),p=t(49492),m=t(94116),f=t.n(m),h=function(e,n){return null!=e&&e.length?null==e?void 0:e.map((function(e){var t=e||{},a=t.fieldKey,o=t.text,i=n?null==n?void 0:n.find((function(e){return(null==e?void 0:e.key)===a})):null;if(i){var l=(i||{}).className;return r.createElement("span",{className:s()(l)},o)}return o})):""},v=function(e){var n=e.canEdit,t=e.displayAddressItem,a=e.onClickEdit,i=h(null==t?void 0:t[0],[{key:"name",className:f().addressName}]),m=h(null==t?void 0:t[1]),v=h(null==t?void 0:t[2]);return null!=t&&t.length?r.createElement("div",null,i?r.createElement("div",{className:s()(f().addressItem,f().nameAndPhone)},r.createElement("div",null,r.createElement(d.A,{fields:[i]})),n?r.createElement(c.A,{className:f().editBtn,type:u.el.text,size:"lg",theme:u.c4.light,onClick:a},o.Ay.t("edit",{ns:"bgt_order_detail"}),r.createElement(p.d,null,r.createElement(l.A,null))):null):null,m?r.createElement("div",{className:s()(f().addressItem,f().strict)},r.createElement(d.A,{fields:[m]})):null,v?r.createElement("div",{className:s()(f().addressItem,f().country)},r.createElement(d.A,{fields:[v]})):null):null};n.A=(0,i.Xc)((0,r.memo)(v))},75975:function(e,n,t){"use strict";t.r(n),t.d(n,{LOW_TAX_TO_HIGH_RESULT_MODAL_TYPE:function(){return ce},default:function(){return fe},showLowToHighPaymentModal:function(){return me}});t(79432),t(52675),t(2008),t(26099),t(83851),t(44114),t(23500),t(81278),t(67945),t(84185);var r=t(14242),a=t(61877),s=t(74533),o=t(11286),i=t.n(o),l=t(33514),c=t(32485),u=t.n(c),d=t(47116),p=t(95789),m=t(97582),f=t(7638),h=t(86482),v=t(72055),A=t(8565),g=t(59717),_=t(90782),S=t(63580),y=t(51041);function b(e){var n=e.className,t=void 0===n?"":n,r=e.leftTime,a=void 0===r?0:r,s=e.countDownCallback,o=e.accuracy,i=void 0===o?100:o,c=e.timerClass,u=void 0===c?"":c,d=e.colonClass,p=void 0===d?"":d,m=(0,y.A)({leftTime:a,timeOutHandler:function(){s&&s()},accuracy:i,fixTime:!0}),f=m.totalHours,h=m.minutes,v=m.seconds,A=m.countDownTimer;return(0,l.useEffect)((function(){return function(){A&&clearInterval(A)}}),[A]),l.createElement("div",{className:t},f?l.createElement("i",{className:u},f):null,f?l.createElement("i",{className:p},":"):null,l.createElement("i",{className:u},h),l.createElement("i",{className:p},":"),l.createElement("i",{className:u},v))}b.defaultProps={className:"",countDownCallback:function(){},accuracy:100};var E,O,C,P,T,N,w,I,x,k,L,R,D,H,B,j,M,W,F,Y,U=(0,l.memo)(b),G=t(13425),K=t(22751),V=t(29659),q=(t(35639),t(60055)),z=(t(76918),t(38781),t(69085),t(50113),t(27495),t(5746),t(37451)),X=t(13852),$=t(64491),J=t(7338),Q=t(14560),Z=t(20475),ee=t(53001),ne=t(91074),te=t(4118);function re(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ae(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?re(Object(t),!0).forEach((function(n){(0,a.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):re(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var se=(E=z.XI.bound,O=z.XI.bound,C=z.XI.bound,P=z.XI.bound,T=z.XI.bound,N=z.XI.bound,w=z.XI.bound,I=z.XI.bound,x=function(){function e(n){(0,K.A)(this,e),this.changeAddressSource=void 0,(0,G.A)(this,"paymentExtra",k,this),(0,G.A)(this,"currentSelectedData",L,this),(0,G.A)(this,"checkExtraInfoDto",R,this),(0,G.A)(this,"parentOrderSn",D,this),this.cardBindStore=void 0,(0,G.A)(this,"serialNo",H,this),(0,G.A)(this,"paymentInfo",B,this),(0,G.A)(this,"addressSnapshotId",j,this),(0,G.A)(this,"addressSnapshotSn",M,this),(0,G.A)(this,"countDownEndMillSeconds",W,this),(0,G.A)(this,"localInfo",F,this),(0,G.A)(this,"usePaypalSigned",Y,this),z.Gn&&(0,z.Gn)(this),this.process(n)}var n,t,r;return(0,V.A)(e,[{key:"process",value:function(e){function n(n){return e.apply(this,arguments)}return n.toString=function(){return e.toString()},n}((function(e){var n=this;(0,J.ON)().then((function(e){n.localInfo=e})),Object.assign(this,e);var t=new Q.A;Object.assign(t,this.cardBindStore),this.cardBindStore=t,this.cardBindStore.initService((0,$.Km)()),this.updatePaymentExtra()}))},{key:"updatePaymentExtra",value:function(){var e=(this.paymentInfo||{}).channelList,n=((null==e?void 0:e.find((function(e){return!!e.selected})))||{}).appId,t=(e||[]).find((function(e){return e.selected})),r=((null==e?void 0:e.find((function(e){return e.appId===h.sk.CardPay})))||{}).cardContentList,a=null==r?void 0:r.find((function(e){return!!e.selected})),s=!1;try{s=1==+((0,X.Xe)(window.location.search).device_support_apple_pay||0)||(0,ne.n)(window.navigator.userAgent)}catch(e){s=!1}this.paymentExtra={front_scene:"tax_adjustment",payAppId:n,selected_account_index:null==a?void 0:a.accountIndex,supported_apple_pay:s,selected_channel:null==t?void 0:t.channel}}},{key:"updatePaymentList",value:(r=(0,s.A)(i().mark((function e(){var n,t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==this||null===(n=this.updatePaymentExtra)||void 0===n||n.call(this),e.next=3,(0,te.kQ)({parentOrderSn:this.parentOrderSn,serialNo:this.serialNo,paymentExtra:this.paymentExtra||{},changeAddressSource:this.changeAddressSource});case 3:t=e.sent,this.paymentInfo=ae(ae({},t||{}),{},{channelList:t.channelList,cashierTitle:t.cashierTitle,extra:t.extra});case 5:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"setUsePaypalSigned",value:function(e){this.usePaypalSigned=e}},{key:"onUnbindSuccess",value:(t=(0,s.A)(i().mark((function e(){var n,t,r,a,s=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,ee.xc)(),e.next=3,this.updatePaymentList();case 3:(0,ee.W$)(),null!==(n=this.paymentExtra)&&void 0!==n&&n.selected_account_index&&(this.paymentInfo.channelList=(0,Z.ZJ)((null===(t=this.paymentInfo)||void 0===t?void 0:t.channelList)||[],this.paymentExtra.selected_account_index),null===(r=this.paymentInfo)||void 0===r||null===(a=r.channelList)||void 0===a||a.forEach((function(e){var n,t=e.appId===h.sk.CardPay;Object.assign(e,{selected:t}),t&&(null===(n=e.cardContentList)||void 0===n||n.forEach((function(e){Object.assign(e,{selected:e.accountIndex===s.paymentExtra.selected_account_index})})))})));case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"choosePayCallback",value:function(e){var n;null===(n=this.paymentInfo.channelList)||void 0===n||n.forEach((function(n){Object.assign(n,{selected:n.appId===e.appId})})),this.paymentExtra.payAppId=e.appId,this.paymentExtra.selected_channel=e.channel}},{key:"chooseCardCallback",value:(n=(0,s.A)(i().mark((function e(n){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("add"!==n.type){e.next=5;break}return(0,ee.xc)(),e.next=4,this.updatePaymentList();case 4:(0,ee.W$)();case 5:this.paymentExtra.selected_account_index=n.accountIndex,this.paymentExtra.payAppId=h.sk.CardPay,this.paymentExtra.selected_channel=h.Hr.CardPay,this.paymentInfo.channelList=(0,Z.ZJ)(this.paymentInfo.channelList||[],n.accountIndex),null===(t=this.paymentInfo.channelList)||void 0===t||t.forEach((function(e){var t,r=e.appId===h.sk.CardPay;Object.assign(e,{selected:r}),r&&(null===(t=e.cardContentList)||void 0===t||t.forEach((function(e){Object.assign(e,{selected:e.accountIndex===n.accountIndex})})))}));case 10:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"buildPaymentChannelVo",value:function(){var e,n,t,r,a=this,s=null===(e=(this.paymentInfo.channelList||[]).filter((function(e){return e.appId===a.paymentExtra.payAppId})))||void 0===e?void 0:e[0];if((null==s?void 0:s.appId)===h.sk.Paypal){var o,i=(null==s||null===(o=s.extraMap)||void 0===o?void 0:o.signed)&&this.usePaypalSigned||!1;s.extraMap?s.extraMap.signed=i:s.extraMap={signed:i}}return ae(ae({},s||{}),{},{payTicket:null===(n=this.paymentInfo)||void 0===n?void 0:n.payTicket,cashierTransInfo:null===(t=this.paymentInfo)||void 0===t||null===(r=t.extra)||void 0===r?void 0:r.cashierTransInfo,usePaypalSigned:(null==s?void 0:s.appId)===h.sk.Paypal?this.usePaypalSigned:void 0})}}]),e}(),(0,q.A)(x.prototype,"process",[E],Object.getOwnPropertyDescriptor(x.prototype,"process"),x.prototype),(0,q.A)(x.prototype,"updatePaymentExtra",[O],Object.getOwnPropertyDescriptor(x.prototype,"updatePaymentExtra"),x.prototype),(0,q.A)(x.prototype,"updatePaymentList",[C],Object.getOwnPropertyDescriptor(x.prototype,"updatePaymentList"),x.prototype),k=(0,q.A)(x.prototype,"paymentExtra",[z.sH],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=(0,q.A)(x.prototype,"currentSelectedData",[z.sH],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),R=(0,q.A)(x.prototype,"checkExtraInfoDto",[z.sH],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=(0,q.A)(x.prototype,"parentOrderSn",[z.sH],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),H=(0,q.A)(x.prototype,"serialNo",[z.sH],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),B=(0,q.A)(x.prototype,"paymentInfo",[z.sH],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=(0,q.A)(x.prototype,"addressSnapshotId",[z.sH],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=(0,q.A)(x.prototype,"addressSnapshotSn",[z.sH],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=(0,q.A)(x.prototype,"countDownEndMillSeconds",[z.sH],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=(0,q.A)(x.prototype,"localInfo",[z.sH],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=(0,q.A)(x.prototype,"usePaypalSigned",[z.sH],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),(0,q.A)(x.prototype,"setUsePaypalSigned",[P],Object.getOwnPropertyDescriptor(x.prototype,"setUsePaypalSigned"),x.prototype),(0,q.A)(x.prototype,"onUnbindSuccess",[T],Object.getOwnPropertyDescriptor(x.prototype,"onUnbindSuccess"),x.prototype),(0,q.A)(x.prototype,"choosePayCallback",[N],Object.getOwnPropertyDescriptor(x.prototype,"choosePayCallback"),x.prototype),(0,q.A)(x.prototype,"chooseCardCallback",[w],Object.getOwnPropertyDescriptor(x.prototype,"chooseCardCallback"),x.prototype),(0,q.A)(x.prototype,"buildPaymentChannelVo",[I],Object.getOwnPropertyDescriptor(x.prototype,"buildPaymentChannelVo"),x.prototype),x),oe=t(9264),ie=t.n(oe);function le(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}var ce=function(e){return e[e.success=0]="success",e[e.timeout=1]="timeout",e}({}),ue=function(){var e=(0,m.B)("bgt_order_detail").t;return l.createElement("div",{className:ie().titleWrapper},l.createElement("div",{className:ie().title},e("payment")))},de=function(e,n){var t=e.onShow,r=e.onHide,a=e.onClose,o=e.onConfirm,c=e.onCountDownEnd,d=e.store,p=d||{},y=p.checkExtraInfoDto,b=p.paymentInfo,E=(p.addressSnapshotId,p.countDownEndMillSeconds),O=p.cardBindStore,C=p.localInfo,P=p.paymentExtra,T=p.usePaypalSigned,N=p.setUsePaypalSigned,w=p.onUnbindSuccess,I=p.choosePayCallback,x=p.chooseCardCallback,k=p.buildPaymentChannelVo,L=p.changeAddressSource,R=(0,m.B)("bgt_order_detail").t,D=(0,l.useRef)(!1),H=(0,l.useRef)(null),B=(0,l.useCallback)(function(){var e=(0,s.A)(i().mark((function e(n){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==n||null===(t=n.stopPropagation)||void 0===t||t.call(n),e.next=3,null==a?void 0:a();case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[a]),j={payAppId:P.payAppId,channelList:(null==b?void 0:b.channelList)||[],paymentVo:b,paymentExtra:P,onPaymentChange:I,onCardChange:x,localInfo:C,cardBindStore:O,addNewCardSuccessCallback:x,usePaypalSigned:T,setUsePaypalSigned:N,onUnbindSuccess:w,errorPayloadHandler:_.Ay,ref:H,className:ie().paymentList,payItemClass:ie().payItem};(0,l.useEffect)((function(){return(0,S.xv)("lowToHighPaymentModalShow",{customTags:{bizScene:"editShippingAddress",changeAddressSource:L||""}}),null==t||t(),function(){null==r||r(),(0,S.xv)("lowToHighPaymentModalHide",{customTags:{bizScene:"editShippingAddress",changeAddressSource:L||""}})}}),[]);var M=(0,l.useCallback)((0,s.A)(i().mark((function e(){var n,t,r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=null==k?void 0:k(),!D.current&&t.appId){e.next=3;break}return e.abrupt("return");case 3:if(t.appId!==h.sk.CardPay||null!=t&&null!==(n=t.cardContentList)&&void 0!==n&&n.length){e.next=6;break}return null==H||null===(r=H.current)||void 0===r||null===(a=r.showAddNewCardPop)||void 0===a||a.call(r),e.abrupt("return");case 6:return D.current=!0,(0,S.xv)("lowToHighPaymentModalConfirm",{customTags:{bizScene:"editShippingAddress",changeAddressSource:L||""}}),e.next=10,null==o?void 0:o(t);case 10:D.current=!1;case 11:case"end":return e.stop()}}),e)}))),[k,L,o]),W=(0,l.useMemo)((function(){var e=(y||{}).needPayTaxAmountNormStr;return R("tax-payment-btn",{c:e||""})}),[y,R]),F=(0,l.useCallback)((function(){return l.createElement(A.A,{page_el_sn:0},l.createElement("div",{className:u()(ie().buttonWrapper,ie().buttonWrapper__fixedBottom)},l.createElement("div",{className:ie().button,onClick:M},l.createElement("span",{className:ie().btnText},W))))}),[W,M]),Y=function(){var e=(0,s.A)(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==d||null===(n=d.updatePaymentList)||void 0===n?void 0:n.call(d);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,l.useImperativeHandle)(n,(function(){return{refreshPaymentList:function(){Y()}}})),l.createElement(g.A,{size:"md"},l.createElement(g.A.StaticContainer,null,l.createElement(g.A.CloseButton,{onClick:B}),l.createElement(g.A.Title,null,l.createElement(ue,null)),l.createElement(g.A.SubTitle,null,l.createElement("div",{className:ie().countDownWrapper},l.createElement(f.x,{i18nKey:"tax-payment-desc",ns:"bgt_order_detail",components:{1:l.createElement(U,{className:ie().countDown,leftTime:E||0,countDownCallback:c})}})))),l.createElement(g.A.ScrollContainer,null,l.createElement("div",{className:ie().infoWrapper},l.createElement(v.A,j))),l.createElement(g.A.StaticContainer,null,l.createElement(F,null)))},pe=(0,d.PA)((0,l.forwardRef)(de)),me=function(e){var n=e.onClose,t=null,s=l.createRef(),o=new se(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?le(Object(t),!0).forEach((function(n){(0,a.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):le(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({},e)),i=function(){var e;o=null,null===(e=t)||void 0===e||e()};return t=(0,p.A)(l.createElement(pe,(0,r.A)({},e,{store:o,ref:s,onClose:function(){null==i||i(),null==n||n()}})),{}),{hideFunc:i,ref:s}},fe=pe},1794:function(e,n,t){"use strict";t.d(n,{o:function(){return A},a:function(){return E}});var r=t(14242),a=(t(62062),t(33514)),s=t(72635),o=t(14511),i=t(99117),l=t(34678),c=t(73035),u=t(12600),d=t(63580),p=t(27906),m=t(25418),f=t(22838),h=t.n(f),v=function(e){var n=e.parentOrderSn,t=e.alertTitle,r=e.alertContent,c=e.addressInfo,f=e.onClose,v=null==c?void 0:c.displayAddressItem,A=function(){null==f||f()};(0,a.useEffect)((function(){(0,d.Ay)("merchantAuditProgressModalShow",{customFields:{parentOrderSn:String(n)},customTags:{logLevel:u.$b.normal,logOperate:u.pp.impr}}),(0,i.WW)({page_el_sn:233842})}),[]);var g=(0,a.useMemo)((function(){return t?a.createElement(p.V8,null,t):null}),[t]);return a.createElement(o.Ay,null,a.createElement(l.A,{title:g,confirmButtonLabel:s.Ay.t("ok",{ns:"sumer_global"}),onConfirm:function(){(0,i.E0)({page_el_sn:233843}),null==A||A()},onClose:A},a.createElement(a.Fragment,null,null!=r&&r.length?a.createElement("div",null,(r||[]).map((function(e){return a.createElement(p.V8,{className:h().alertText},e)}))):null,null!=v&&v.length?a.createElement("div",{className:h().addressBox},a.createElement(m.A,{displayAddressItem:v})):null)))},A=function(e){return(0,c.P)({popupNode:a.createElement(v,(0,r.A)({},e,{onClose:function(){var n;(null==e?void 0:e.onClose)&&(null==e||null===(n=e.onClose)||void 0===n||n.call(e)),(0,c.L)(void 0)}}))})},g=t(2283),_=t(49492),S=t(51496),y=t.n(S),b=function(e){var n=e.parentOrderSn,t=e.alertTitle,r=e.alertPromptRich,c=e.alertContent,f=e.addressInfo,h=e.onClose,v=e.onClickEditAddress,A=null==f?void 0:f.displayAddressItem,S=function(){null==h||h()};(0,a.useEffect)((function(){(0,d.Ay)("merchantAuditSuccessModalShow",{customFields:{parentOrderSn:String(n)},customTags:{logLevel:u.$b.normal,logOperate:u.pp.impr}}),(0,i.WW)({page_el_sn:233858})}),[]);var b=(0,a.useMemo)((function(){return t?a.createElement("div",null,a.createElement(_.d,null,a.createElement(g.A,{className:y().checkIcon})),a.createElement(p.V8,{className:y().titleText},t)):null}),[t]);return a.createElement(o.Ay,null,a.createElement(l.A,{title:b,confirmButtonLabel:s.Ay.t("ok",{ns:"sumer_global"}),onConfirm:function(){(0,i.E0)({page_el_sn:233860}),null==S||S()},onClose:S},a.createElement(a.Fragment,null,null!=c&&c.length?a.createElement("div",null,(c||[]).map((function(e){return a.createElement(p.V8,{className:y().alertText},e)}))):null,r?a.createElement(p.V8,{className:y().alertPrompt},r):null,null!=A&&A.length?a.createElement("div",{className:y().addressBox},a.createElement(m.A,{displayAddressItem:A,canEdit:!0,onClickEdit:function(e){null==e||e.stopPropagation(),null==h||h(),(0,d.Ay)("merchantAuditClickEditBtn",{customFields:{parentOrderSn:String(n)},customTags:{logLevel:u.$b.normal,logOperate:u.pp.click}}),(0,i.E0)({page_el_sn:233859}),null==v||v()}})):null)))},E=function(e){return(0,c.P)({popupNode:a.createElement(b,(0,r.A)({},e,{onClose:function(){var n;(null==e?void 0:e.onClose)&&(null==e||null===(n=e.onClose)||void 0===n||n.call(e)),(0,c.L)(void 0)}}))})}},25186:function(e,n,t){"use strict";t.d(n,{Ay:function(){return Oe}});t(79432),t(52675),t(2008),t(83851),t(44114),t(23500),t(81278),t(67945),t(84185);var r=t(6356),a=t(74533),s=t(61877),o=t(22751),i=t(29659),l=(t(2892),t(23792),t(26099),t(3362),t(47764),t(62953),t(27495),t(5746),t(11286)),c=t.n(l),u=t(72635),d=t(8515),p=t(13852),m=t(32470),f=t(50453),h=t(72506),v=t(86482),A=t(20162),g=t(77900),_=t(12600),S=t(63580),y=t(53001),b=t(75565),E=t(91074),O=t(58746),C=t(99232),P=t(14242),T=(t(62062),t(33514)),N=t(25232),w=t(65309),I=t(95789),x=t(97582),k=t(40309),L=t(18496),R=t(34678),D=t(16895),H=t(51688),B=t(56899),j=t(73466),M=t(27403),W=t(25418),F=t(10003),Y=t.n(F),U=function(e){return e.originalAddressInfo="originalAddressInfo",e.auditAddressInfo="auditAddressInfo",e.newAddressInfo="newAddressInfo",e}({}),G=function(e){var n=e.title,t=e.subTitle,r=e.addressInfo,a=e.onClose,s=(0,x.B)("bgt_order_detail").t;return T.createElement(R.A,{confirmButtonLabel:s("ok"),onConfirm:function(){a()},onClose:a,title:(0,D.A)(n||"",{replace:H.A}),subTitle:(0,D.A)(t||"",{replace:H.A})},null!=r&&r.displayAddressItem?T.createElement("div",{className:Y().addressInfoContainer},T.createElement(W.A,{displayAddressItem:null==r?void 0:r.displayAddressItem})):null)},K=function(){var e=(0,a.A)(c().mark((function e(n){var t,r,a,s,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,r=n.parentOrderSn,a=n.addressInfoModalType,s=void 0===a?U.originalAddressInfo:a,e.next=4,(0,j.Lb)({parentOrderSn:r,queryAddressScene:s===U.auditAddressInfo?1:void 0});case 4:return o=e.sent,t=(0,I.A)(T.createElement(G,(0,P.A)({},n,{addressInfo:o,onClose:function(){var e,r;null===(e=t)||void 0===e||e(),null==n||null===(r=n.onClose)||void 0===r||r.call(n)}})),{}),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),V=t(66998),q=t(24031),z=t.n(q),X=function(e){var n=e.changeAddressShippingTimeInfo,t=e.goodsList,r=e.parentOrderSn,a=e.jumpUrl,s=Math.max(n?3:0,(null==t?void 0:t.length)||1),o=Math.min(s,4),i="".concat(112*o-10,"px"),l=function(e){e.stopPropagation(),(0,S.xv)("editShippingAddressBatchUpdateResultModalForward",{customFields:{parentOrderSn:r},customTags:{bizScene:B.Yn.editAddress,logLevel:_.$b.normal}}),a&&f.Ay.uniformForward(a,{openTarget:"_blank"})};return T.createElement(k.Nn,{className:z().itemWrapper,onClick:l},n?T.createElement("div",{className:z().timeChangeInfo,style:{width:i}},(0,D.A)(n||"",{replace:H.A})):null,T.createElement("div",{"aria-hidden":!0,className:z().goodsListWrapper,style:{width:i}},(t||[]).map((function(e,n){var r=(e||{}).imageUrl,a=3===n,s=((null==t?void 0:t.length)||0)-4;return n>=4?null:T.createElement("div",{className:z().goodsImageWrapper,key:n},T.createElement("div",{className:z().goodsImage},T.createElement(V.Ay,{src:r||""}),a&&s?T.createElement("div",{className:z().moreCount},"+".concat(s)):null))}))),r?T.createElement("div",{role:"button",tabIndex:0,className:z().orderSn,style:{width:i},onClick:l},"# ".concat(r)):null)},$=(0,T.memo)(X),J=t(45055),Q=t.n(J),Z=function(e){var n=(0,x.B)("bgt_order_detail").t,t=e.onClose,r=e.res,a=e.parentOrderSn,s=e.auditAddressInfo,o=r||{},i=o.title,l=o.subTitle,c=o.checkExtraInfoDtolist,u=o.updateResult;(0,T.useEffect)((function(){return(0,S.xv)("editShippingAddressBatchUpdateResultModalShow",{customFields:{parentOrderSn:a,updateResult:u},customTags:{bizScene:B.Yn.editAddress,logLevel:_.$b.normal}}),function(){(0,S.xv)("editShippingAddressBatchUpdateResultModalHide",{customFields:{parentOrderSn:a,updateResult:u},customTags:{bizScene:B.Yn.editAddress,logLevel:_.$b.normal}})}}),[]);var d=function(e,n){return(0,H.A)(e,{extendReplace:function(e){return function(e,n){var t=e,r=((null==t?void 0:t.attribs)||{}).biz_scene;if("urllink"===t.name&&("originalAddressInfo"===r||"auditAddressInfo"===r||"newAddressInfo"===r))return T.createElement("span",{role:"button",tabIndex:0,className:Q().urllink,onClick:function(){var e,t,s,o;(0,S.xv)("editShippingAddressBatchUpdateResultModalClickAddressInfo",{customFields:{biz_scene:r,parentOrderSn:a},customTags:{bizScene:B.Yn.editAddress,logLevel:_.$b.normal}});var i=null==n||null===(e=n.checkExtraInfoDtolistItem)||void 0===e?void 0:e.changeAddressInfo;K({parentOrderSn:null==n||null===(t=n.checkExtraInfoDtolistItem)||void 0===t||null===(s=t.parentOrderInfoList)||void 0===s||null===(o=s[0])||void 0===o?void 0:o.parentOrderSn,addressInfoModalType:r,title:null==i?void 0:i.title,subTitle:null==i?void 0:i.changeAddressInfoDesc})}},(0,N.zd)(t.children,{replace:H.A}))}(e,n)},enableConvertRTLStyles:!0})},p=(0,T.useMemo)((function(){return T.createElement(T.Fragment,null,T.createElement("div",{className:Q().title},u===M.Ch.SuccessAndTimeChange?T.createElement(w.d,null,T.createElement(L.A,{"aria-hidden":!0,className:Q().icon})):null,T.createElement("span",null,(0,D.A)(i||"",{replace:d}))),l?T.createElement("div",{className:Q().subTitle},(0,D.A)(l||"",{replace:d})):null)}),[l,i,u]);if(u===M.Ch.SuccessAndTimeChange){var m=(null==c?void 0:c[0])||{},f=(m||{}).parentOrderInfoList;return T.createElement(R.A,{onClose:function(){return null==t?void 0:t()},size:"l",scrollContainerProps:{className:Q().scrollContainer},title:p,confirmButtonLabel:n("ok"),onConfirm:function(){return null==t?void 0:t()},confirmButtonProps:{className:Q().confirmBtn}},T.createElement("div",{className:Q().listWrapper,onClick:function(e){return e.stopPropagation()}},(f||[]).map((function(e,n){var t=(e||{}).changeAddressShippingTimeInfo;return T.createElement("div",{className:Q().listItem,key:n},t?T.createElement("div",{className:Q().resultDesc},(0,D.A)(t,{replace:function(e){return d(e,{checkExtraInfoDtolistItem:m})}})):null,T.createElement("div",{className:Q().orderInfoListWrapper},T.createElement($,(0,P.A)({},e,{changeAddressShippingTimeInfo:""}))))}))))}return u===M.Ch.AllMerchantAudit?T.createElement(G,{title:i,subTitle:l,addressInfo:s,addressInfoModalType:U.auditAddressInfo,onClose:function(){return null==t?void 0:t()}}):T.createElement(R.A,{onClose:function(){return null==t?void 0:t()},size:"l",scrollContainerProps:{className:Q().scrollContainer},title:p,confirmButtonLabel:n("ok"),onConfirm:function(){return null==t?void 0:t()},confirmButtonProps:{className:Q().confirmBtn}},T.createElement("div",{className:Q().listWrapper,onClick:function(e){return e.stopPropagation()}},(c||[]).map((function(e,n){var t=e||{},r=t.parentOrderInfoList,a=t.subGroupChangeAddressResultDesc;return T.createElement("div",{className:Q().listItem,key:n},a?T.createElement("div",{className:Q().resultDesc},(0,D.A)(a,{replace:function(n){return d(n,{checkExtraInfoDtolistItem:e})}})):null,T.createElement(k.Ay,{className:Q().orderInfoListWrapper,arrowClassName:Q().arrowBtnClass,options:{classes:{prev:Q().rvLeftArrow,next:Q().rvRightArrow}}},(r||[]).map((function(e,n){return T.createElement($,(0,P.A)({key:n},e))}))))}))))},ee=function(){var e=(0,a.A)(c().mark((function e(n){var t,r,a,s,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=null,r=n.parentOrderSn,a=n.res,(s=(a||{}).updateResult)!==M.Ch.AllSuccess){e.next=6;break}return(0,b.n)(u.Ay.t("bgt_order_detail:edit-address.updated-successfully")),e.abrupt("return");case 6:if(s!==M.Ch.AllMerchantAudit){e.next=10;break}return e.next=9,(0,j.Lb)({parentOrderSn:r,queryAddressScene:1});case 9:o=e.sent;case 10:return t=(0,I.A)(T.createElement(Z,(0,P.A)({},n,{auditAddressInfo:o,onClose:function(){var e,r;null===(e=t)||void 0===e||e(),null==n||null===(r=n.onClose)||void 0===r||r.call(n)}})),{}),e.abrupt("return",t);case 12:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ne=t(24449),te=function(e){var n=e.onBack;return(0,T.useEffect)((function(){var e=(0,ne.v)((function(){null==n||n()}));return function(){null==e||e()}}),[]),null},re=t(59717),ae=t(41415),se=t.n(ae),oe=function(){return T.createElement("svg",{className:se().successSvg,xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0},T.createElement("defs",null,T.createElement("clipPath",{id:"i0"},T.createElement("path",{d:"M375,0 L375,812 L0,812 L0,0 L375,0 Z"})),T.createElement("clipPath",{id:"i1"},T.createElement("path",{d:"M36.525641,0 C56.6981955,0 73.0512821,16.5654643 73.0512821,37 C73.0512821,57.4345357 56.6981955,74 36.525641,74 C16.3530865,74 0,57.4345357 0,37 C0,16.5654643 16.3530865,0 36.525641,0 Z M36.525641,3.04109589 C18.0111047,3.04109589 3.00210748,18.2450151 3.00210748,37 C3.00210748,55.7549849 18.0111047,70.9589041 36.525641,70.9589041 C55.0401774,70.9589041 70.0491746,55.7549849 70.0491746,37 C70.0491746,18.2450151 55.0401774,3.04109589 36.525641,3.04109589 Z M55.4514455,25.4117262 L55.5607132,25.5099321 C56.1235906,26.0671237 56.1562452,26.9592508 55.6589922,27.5664315 L55.5595474,27.6767874 L32.4721448,50.9957421 C31.9213228,51.5520597 31.0530668,51.607009 30.4501007,51.145082 L30.3402957,51.0524098 L18.6283414,40.1851507 C18.0114584,39.6127588 17.9809976,38.6434546 18.5603054,38.0201492 C19.1055362,37.4335088 19.9965853,37.3624398 20.6138274,37.8333155 L20.7262004,37.927962 L31.3565006,47.7905785 L53.393736,25.532962 C53.9572262,24.9638211 54.849773,24.9212143 55.4514455,25.4117262 Z"}))),T.createElement("g",{transform:"translate(-151.0 -272.0)"},T.createElement("g",{clipPath:"url(#i0)"},T.createElement("g",{transform:"translate(42.0 252.0)"},T.createElement("g",{transform:"translate(109.0 20.0)"},T.createElement("g",{transform:"translate(1.974358974358971 2.0)"},T.createElement("g",{clipPath:"url(#i1)"},T.createElement("polygon",{points:"0,0 73.0512821,0 73.0512821,74 0,74 0,0",stroke:"none",fill:"#FB7701"}))))))))},ie=function(e){return e[e.DEFAULT=0]="DEFAULT",e[e.AFTERCONFIRM=1]="AFTERCONFIRM",e[e.DIRECT_CHANGE_ADDRESS=2]="DIRECT_CHANGE_ADDRESS",e[e.LOW_TAX_TO_HIGH=3]="LOW_TAX_TO_HIGH",e}({}),le=function(e){var n=(0,x.B)("bgt_order_detail").t,t=e.close,r=e.onConfirm,a=e.type,s=e.onCancel,o=e.checkExtraInfoDto,i=e.alterInfo,l=(0,T.useMemo)((function(){if(a===ie.DIRECT_CHANGE_ADDRESS){var e=o||{},n=e.nowTaxAmountNormStr,t=e.previousTaxAmountNormStr,r=e.refundTaxAmountNormStr;return{previousTaxAmountString:"".concat(t||""),nowTaxAmountString:"".concat(n||""),refundTaxAmountString:"".concat(r||"")}}var s=i||{},l=s.previousTaxAmountNormStr,c=s.refundTaxAmountNormStr,u=s.nowTaxAmountNormStr,d=s.needPayTaxAmountNormStr;return a===ie.LOW_TAX_TO_HIGH?{previousTaxAmountString:l||"",nowTaxAmountString:u||"",needPayTaxAmountString:d||""}:{previousTaxAmountString:l||"",nowTaxAmountString:u||"",refundTaxAmountString:c||""}}),[i,o,a]),c=l.previousTaxAmountString,u=l.nowTaxAmountString,d=l.refundTaxAmountString,p=l.needPayTaxAmountString,m=(0,T.useMemo)((function(){return a===ie.AFTERCONFIRM?T.createElement(oe,null):a===ie.DIRECT_CHANGE_ADDRESS?T.createElement("div",{className:se().title},n("tax-change-high-to-low-title",{m:d||""})):a===ie.DEFAULT?T.createElement("div",{className:se().title},n("high-tax-low-pop.refund-tip")):a===ie.LOW_TAX_TO_HIGH?T.createElement("div",{className:se().title},n("tax-change-low-to-high-title")):void 0}),[d,n,a]),f=(0,T.useCallback)((function(){return T.createElement("div",{className:se().taxContainer},T.createElement("div",null,n("high-tax-low-pop.shipping-address")),T.createElement("div",null,n("tax-or-fees")))}),[n]),h=(0,T.useCallback)((function(){return a===ie.LOW_TAX_TO_HIGH?T.createElement("div",{className:se().totalTax},T.createElement("div",null,n("need-to-pay")),T.createElement("div",{className:se().totalTaxAmount},T.createElement("span",null,p))):T.createElement("div",{className:se().totalTax},T.createElement("div",null,n("high-tax-low-pop.get-a-refund")),T.createElement("div",{className:se().totalTaxAmount,style:{color:"#FB7701"}},T.createElement("span",null,d)))}),[p,d,n,a]),v=n("high-tax-low-pop.confirm");a===ie.DIRECT_CHANGE_ADDRESS?v=n("ok"):a===ie.AFTERCONFIRM?v=n("high-tax-low-pop.view-refund-details"):a===ie.LOW_TAX_TO_HIGH&&(v=n("pay"));var A=a===ie.AFTERCONFIRM?n("high-tax-low-pop.continue-shopping"):n("high-tax-low-pop.cancel");return T.createElement(re.A,{size:"md"},T.createElement(re.A.StaticContainer,null,T.createElement(re.A.CloseButton,{onClick:function(e){null==e||e.stopPropagation(),null==s||s(),null==t||t()}}),T.createElement(re.A.Title,null,T.createElement("div",{style:{textAlign:"center"}},m))),T.createElement(re.A.ScrollContainer,null,function(){a===ie.AFTERCONFIRM&&(se().successTitle,n("high-tax-low-pop.shipping-address-updated-successfully"),se().successSubTitle,n("high-tax-low-pop.refund-tax-tip",{m:d||""}));var e=(null==o?void 0:o.taxNameAndValuePayloadList)||(null==i?void 0:i.taxNameAndValuePayloadList)||[];return null!=e&&e.length?T.createElement("div",null,T.createElement(f,null),T.createElement("div",{className:se().taxInfoWrapper},T.createElement("div",{className:se().taxInfoTitle},n("previous")),e.map((function(e,n){var t,r;return T.createElement("div",{className:se().singleConcreteTax,key:n},T.createElement("div",null,(null==e||null===(t=e.previousNameAndValuePairInfo)||void 0===t?void 0:t.detailTaxType)||""),T.createElement("div",{className:se().taxAmount},T.createElement("span",null,(null==e||null===(r=e.previousNameAndValuePairInfo)||void 0===r?void 0:r.taxAmountNorm)||"")))}))),T.createElement("div",{className:se().taxInfoWrapper},T.createElement("div",{className:se().taxInfoTitle},n("now")),e.map((function(e,n){var t,r;return T.createElement("div",{className:se().singleConcreteTax,key:n},T.createElement("div",null,(null==e||null===(t=e.nowNameAndValuePairInfo)||void 0===t?void 0:t.detailTaxType)||""),T.createElement("div",{className:se().taxAmount},T.createElement("span",null,(null==e||null===(r=e.nowNameAndValuePairInfo)||void 0===r?void 0:r.taxAmountNorm)||"")))}))),T.createElement(h,null)):T.createElement("div",null,T.createElement(f,null),T.createElement("div",{className:se().taxInfoWrapper},T.createElement("div",{className:se().singleConcreteTax},T.createElement("div",null,n("high-tax-low-pop.previous")),T.createElement("div",null,c)),T.createElement("div",{className:se().singleConcreteTax},T.createElement("div",null,n("high-tax-low-pop.now")),T.createElement("div",null,u))),T.createElement(h,null))}()),T.createElement(re.A.StaticContainer,null,T.createElement("div",{className:se().buttonContainer},a!==ie.DIRECT_CHANGE_ADDRESS?T.createElement("div",{className:se().cancelButton,onClick:function(){null==s||s(),null==t||t()}},A):null,T.createElement("div",{className:se().confirmButton,onClick:function(){null==t||t(),null==r||r()},style:a===ie.DIRECT_CHANGE_ADDRESS?{width:"100%"}:{}},v))))},ce=function(e){var n;n=(0,I.A)(T.createElement(le,(0,P.A)({close:function(){var t;n(),null==e||null===(t=e.onClose)||void 0===t||t.call(e)}},e)),{})},ue=t(75975),de=t(1794),pe=t(32485),me=t.n(pe),fe=t(99117),he=t(87837),ve=t(32107),Ae=t.n(ve),ge=function(e){var n=e.changeSucShowInfo;(0,fe.WW)({page_el_sn:225131}),(0,fe.WW)({page_el_sn:225132}),(0,g.S7)({title:u.Ay.t("bgt_order_detail:edit-address.updated-successfully"),text:T.createElement(he.Rp,{useClick:!1,page_el_sn:225130},T.createElement("div",{className:Ae().updateSucInfoWrapper},(n||[]).map((function(e,t){return T.createElement("div",{className:me()(Ae().updateSucInfo,(0,s.A)({},Ae().multiSucInfo,(null==n?void 0:n.length)>1)),key:t},(0,D.A)(e||"",{replace:function(e){return(0,H.A)(e,{enableConvertRTLStyles:!0})}}))})))),confirmButtonLabel:u.Ay.t("bgt_order_detail:ok"),onConfirm:function(){(0,fe.E0)({page_el_sn:225131})},onClose:function(){(0,fe.E0)({page_el_sn:225132})}})},_e=t(4118);function Se(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ye(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Se(Object(t),!0).forEach((function(n){(0,s.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Se(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var be=function(e){return e.failed="0",e.success="1",e.processing="2",e.preAuthBack="3",e}({}),Ee=function(){function e(n){var t;(0,o.A)(this,e),this.addressSnapshotId=void 0,this.addressSnapshotSn=void 0,this.parentOrderSn=void 0,this.userConfirmType=void 0,this.isUnpaidOrder=void 0,this.enableEmbedded=void 0,this.onRefreshOrderInfo=void 0,this.onRetryChangeAddress=void 0,this.addressBatchId=void 0,this.parentOrderList=void 0,this.changeAddressPrePopType=void 0,this.changeAddressSource=void 0,this.backRefreshHandle=void 0,this.kvParams=void 0,this.pageSn=void 0,this.onSuccess=void 0,this._paymentPopupHandle=void 0,this.process(n),null===(t=this.handleEditAddressRefresh)||void 0===t||t.call(this)}var n,s,l,P,N,w,x,k,L;return(0,i.A)(e,[{key:"process",value:function(e){var n=e.addressSnapshotId,t=void 0===n?this.addressSnapshotId:n,r=e.addressSnapshotSn,a=void 0===r?this.addressSnapshotSn:r,s=e.parentOrderSn,o=void 0===s?this.parentOrderSn:s,i=e.enableEmbedded,l=void 0===i?this.enableEmbedded:i,c=e.userConfirmType,u=void 0===c?this.userConfirmType:c,d=e.onRetryChangeAddress,p=void 0===d?this.onRetryChangeAddress:d,m=e.onRefreshOrderInfo,f=void 0===m?this.onRefreshOrderInfo:m,h=e.onSuccess,v=void 0===h?this.onSuccess:h,A=e.pageSn,g=void 0===A?this.pageSn:A,_=e.changeAddressSource,S=void 0===_?this.changeAddressSource:_,y=e.addressBatchId,b=void 0===y?this.addressBatchId:y,E=e.parentOrderList,O=void 0===E?this.parentOrderList:E,C=e.changeAddressPrePopType,P=void 0===C?this.changeAddressPrePopType:C;return this.parentOrderSn=o,this.enableEmbedded=l,this.userConfirmType=u,this.addressSnapshotId=t,this.addressSnapshotSn=a,this.onRetryChangeAddress=p,this.onRefreshOrderInfo=f,this.onSuccess=v,this.pageSn=g,this.changeAddressSource=S,this.addressBatchId=b,this.parentOrderList=O,this.changeAddressPrePopType=P,this}},{key:"registerBackRefresh",value:function(){var e,n=this;this.backRefreshHandle||(this.backRefreshHandle=(e=function(){var e;return null==n||null===(e=n.handleEditAddressRefresh)||void 0===e?void 0:e.call(n)},(0,I.A)(T.createElement(te,{onBack:e}))))}},{key:"editShippingAddressBaseKvLog",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,S.xv)(e,ye(ye({},n),{},{customFields:ye(ye({},this.kvParams),(null==n?void 0:n.customFields)||{}),customTags:ye({bizScene:"editShippingAddress",changeAddressSource:String(this.changeAddressSource)||""},(null==n?void 0:n.customTags)||{})}))}},{key:"handleBeforePaymentJump",value:(L=(0,a.A)(c().mark((function e(n){var t,r,a,s,o,i,l,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.parentOrderSn,r=n.serialNo,a=n.addressSnapshotId,s=n.addressSnapshotSn,o=n.paymentAuthId,i=n.channelType,l=n.changeAddressSource,u={edit_address_parent_order_sn:t,edit_address_serial_no:String(r),edit_address_address_snapshot_id:a,edit_address_address_snapshot_sn:s,payment_auth_id:o,channel_type:i,edit_address_change_address_source:String(l)},e.next=4,f.Ay.replaceURL((0,p.rE)(u,window.location.href),window.history.state);case 4:return this.registerBackRefresh(),e.abrupt("return",u);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return L.apply(this,arguments)})},{key:"handleRemovePaymentParams",value:(k=(0,a.A)(c().mark((function e(){var n,t,r,a,s,o,i,l,u,d,m;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,p.Xe)(window.location.href),t=n.edit_address_parent_order_sn,r=n.edit_address_serial_no,a=n.edit_address_address_snapshot_id,s=n.edit_address_address_snapshot_sn,o=n.edit_shipping_address_auth_status,i=n.auth_status,l=n.payment_auth_id,u=n.channel_type,d=n.edit_address_change_address_source,m={edit_address_parent_order_sn:null,edit_address_serial_no:null,edit_address_address_snapshot_id:null,edit_address_address_snapshot_sn:null,edit_shipping_address_auth_status:null,edit_address_change_address_source:null},e.next=4,f.Ay.replaceURL((0,p.rE)(m,window.location.href),window.history.state);case 4:return e.abrupt("return",{parentOrderSn:t,editAddressSerialNo:r,addressSnapshotId:a,addressSnapshotSn:s,authStatus:o,paymentAuthStatus:i,paymentAuthId:l,channelType:u,changeAddressSource:Number(d)});case 5:case"end":return e.stop()}}),e)}))),function(){return k.apply(this,arguments)})},{key:"handleEditAddressRefresh",value:(x=(0,a.A)(c().mark((function e(){var n,t,r,s,o,i,l,d,p,f,A,_,S,b,E,O,P,T,N,w,I,x,k,L,R,D,H,B,W,F,Y,U,G,K,V,q=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==this||null===(n=this.handleRemovePaymentParams)||void 0===n?void 0:n.call(this);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:if(d=e.t0,f=(p=d||{}).parentOrderSn,A=p.editAddressSerialNo,_=p.addressSnapshotId,S=p.addressSnapshotSn,b=p.paymentAuthId,E=p.channelType,O=p.authStatus,P=p.paymentAuthStatus,T=Number(A),this.kvParams=ye(ye({},this.kvParams||{}),{},{parentOrderSn:f}),null==this||null===(t=this.backRefreshHandle)||void 0===t||t.call(this),this.backRefreshHandle=null,null==this||null===(r=this._paymentPopupHandle)||void 0===r||null===(s=r.hideFunc)||void 0===s||s.call(r),f&&T&&(_||S)){e.next=14;break}return e.abrupt("return");case 14:if(this.process(d),this.editShippingAddressBaseKvLog("editShippingAddressLowToHighAuthStart",{customFields:ye({},this.kvParams||{})}),w=(0,m.NS)(window.sessionStorage.getItem("bgt_3ds_pay_callback_pre_auth")||"",{}),I=null==w||null===(o=w.preAuthData)||void 0===o?void 0:o.paymentAuthId,x=null==w||null===(i=w.preAuthData)||void 0===i||null===(l=i.data)||void 0===l?void 0:l.channelType,L={payment_auth_id:k=b||I,channel_type:E||x},O!==be.preAuthBack||"S"!==P&&"P"!==P||!k){e.next=37;break}return R={},e.next=26,(0,h.A)(ye(ye({},(null==w?void 0:w.doPayOptions)||{}),{},{paypalAuthVo:L,klarnaAuthVo:L,afterPayAuthVo:L,otherOpts:{customCreateAndPay:function(){var e=(0,a.A)(c().mark((function e(n){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,j.el)(ye({parentOrderSn:q.parentOrderSn||"",serialNo:T,changeAddressSource:q.changeAddressSource},n||{}));case 2:return t=e.sent,R=(0,C.A)(t),e.abrupt("return",(0,_e.Vy)(R));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}}));case 26:if(D=e.sent,H=(D||{}).resultCode,this.editShippingAddressBaseKvLog("editShippingAddressLowToHighAuthResult",{customFields:ye(ye({},this.kvParams||{}),{},{resultCode:String(H)})}),v.hq.Success,v.hq.Processing===H&&(N=function(){(0,g.S7)({title:u.Ay.t("edit-address-payment-processing",{ns:"bgt_order_detail"}),confirmButtonLabel:u.Ay.t("ok",{ns:"bgt_order_detail"})})}),v.hq.Fail!==H){e.next=36;break}return G=null===(B=R)||void 0===B||null===(W=B.errorPayload)||void 0===W||null===(F=W.viewObject)||void 0===F?void 0:F.title,K=(null===(Y=R)||void 0===Y?void 0:Y.needRollbackSource)||!1,void 0!==(null===(U=R)||void 0===U?void 0:U.success)&&G?(this.editShippingAddressBaseKvLog("editShippingAddressLowToHighPaymentError",{customFields:ye(ye({},this.kvParams||{}),{},{resultCode:String(H)})}),K&&(0,_e.gb)({parentOrderSn:f,serialNo:T,changeAddressSource:this.changeAddressSource}),(0,g.S7)({title:G,confirmButtonLabel:u.Ay.t("ok",{ns:"bgt_order_detail"})})):N=function(){(0,_e.gb)({parentOrderSn:f,serialNo:T,changeAddressSource:q.changeAddressSource}),(0,g.S7)({title:u.Ay.t("edit-address-payment-failed",{ns:"bgt_order_detail"}),confirmButtonLabel:u.Ay.t("ok",{ns:"bgt_order_detail"})})},e.abrupt("return");case 36:v.hq.Canceled;case 37:return(0,y.xc)(),e.next=40,this.checkPollingUpdateStatus({serialNo:Number(T),userConfirmType:M.qL.confirmLowToHigh,forbidLowToHighPollingCancel:!0,onPollingError:N});case 40:e.sent&&k&&(null==this||null===(V=this.onSuccess)||void 0===V||V.call(this,f));case 42:case"end":return e.stop()}}),e,this)}))),function(){return x.apply(this,arguments)})},{key:"handleRetryChangeAddress",value:(w=(0,a.A)(c().mark((function e(n,t){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.editShippingAddressBaseKvLog("editShippingAddressRetryChangeAddress",{customFields:ye({},this.kvParams||{})}),e.abrupt("return",null==this||null===(r=this.onRetryChangeAddress)||void 0===r?void 0:r.call(this,n||this.parentOrderSn,t,{changeAddressSource:this.changeAddressSource}));case 2:case"end":return e.stop()}}),e,this)}))),function(e,n){return w.apply(this,arguments)})},{key:"checkPollingUpdateStatus",value:(N=(0,a.A)(c().mark((function e(n){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=(n||{}).addressBatchId)){e.next=3;break}return e.abrupt("return",this.checkPollingBatchUpdateAddressResult(ye(ye({},n),{},{addressBatchId:t})));case 3:return e.abrupt("return",this.checkPollingNormalUpdateStatus(n));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return N.apply(this,arguments)})},{key:"checkPollingNormalUpdateStatus",value:(P=(0,a.A)(c().mark((function e(n){var s,o,i,l,d,m,f,A,S,P,T,N,w,I,x,k,L,R,D,H,B,W,F=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=(s=n||{}).serialNo,i=s.userConfirmType,l=s.forbidLowToHighPollingCancel,d=s.onPollingError,f=(m=this||{}).parentOrderSn,A=void 0===f?"":f,S=m.enableEmbedded,P=void 0!==S&&S,T=m.addressSnapshotId,N=m.addressSnapshotSn,w=m.kvParams,e.next=4,(0,_e.b$)({parentOrderSn:A,serialNo:o,pageSn:this.pageSn,changeAddressSource:this.changeAddressSource});case 4:if(I=e.sent,this.kvParams||(this.kvParams={}),this.kvParams=ye(ye({},this.kvParams||{}),{},{requestSuccess:null!=I&&I.requestSuccess?"1":"0",updateSuccess:null!=I&&I.updateSuccess?"1":"0"}),x={addressSnapshotId:T,addressSnapshotSn:N,parentOrderSn:A,enableEmbedded:P,serialNo:o,kvParams:w},L=(k=I||{}).resultType,R=k.checkExtraInfoDto,D=k.updateSuccess,H=k.requestSuccess,B=k.changeSucShowInfo,i!==M.qL.confirmLowToHigh){e.next=29;break}if(W=function(){var e=(0,a.A)(c().mark((function e(){var n,s,l,d,m,f,_,S,b,P,w,k;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=(n=I||{}).countDownEnd,l=n.serverTime,e.next=3,Promise.all([(0,_e.L5)((function(){return Promise.resolve().then(t.bind(t,75975))}))]);case 3:if(d=e.sent,m=(0,r.A)(d,1),f=m[0].showLowToHighPaymentModal){e.next=11;break}return F.editShippingAddressBaseKvLog("editShippingAddressLowToHighLoadScriptError",{customFields:ye({},F.kvParams||{})}),(0,y.W$)(),(0,_e.gb)({parentOrderSn:A,serialNo:o,changeAddressSource:F.changeAddressSource}),e.abrupt("return",F.showRetry());case 11:if(_=Number(s)-Number(l)>0?1e3*(Number(s)-Number(l)):0,S={},0!==_&&!D){e.next=17;break}return e.next=16,(0,j.Lb)({parentOrderSn:A});case 16:S=e.sent;case 17:b=!1;try{P=(0,p.Xe)(window.location.search),b=1==+(P.device_support_apple_pay||0)||(0,E.n)(window.navigator.userAgent)}catch(e){b=!1}if(!(_&&_>0)||D){e.next=29;break}return e.next=22,(0,_e.kQ)({parentOrderSn:A,serialNo:o,changeAddressSource:F.changeAddressSource,paymentExtra:{front_scene:"tax_adjustment",supported_apple_pay:!!b}});case 22:if(w=e.sent,null!==(k=w)&&void 0!==k&&k.success){e.next=29;break}return F.editShippingAddressBaseKvLog("editShippingAddressLowToHighPaymentListError",{customFields:ye({},F.kvParams||{})}),(0,y.W$)(),(0,_e.gb)({parentOrderSn:A,serialNo:o,changeAddressSource:F.changeAddressSource}),(0,g.S7)({title:u.Ay.t("tax-payment-error-desc",{ns:"bgt_order_detail"}),confirmButtonLabel:u.Ay.t("ok",{ns:"bgt_order_detail"})}),e.abrupt("return",!1);case 29:return F.editShippingAddressBaseKvLog("editShippingAddressLowToHighPollingSuccess",{customFields:ye({},F.kvParams||{})}),(0,y.W$)(),e.abrupt("return",new Promise((function(e){if(!D&&_&&_>0){F.editShippingAddressBaseKvLog("editShippingAddressLowToHighShowPaymentModal",{customFields:ye({},F.kvParams||{})});var n=!1;F._paymentPopupHandle=f(ye(ye({},x),{},{changeAddressSource:F.changeAddressSource,countDownEndMillSeconds:_,paymentInfo:w,checkExtraInfoDto:R,onShow:function(){F.handleBeforePaymentJump({parentOrderSn:F.parentOrderSn,serialNo:o,addressSnapshotId:T,addressSnapshotSn:N,changeAddressSource:F.changeAddressSource})},onHide:function(){n||F.handleRemovePaymentParams()},onCountDownEnd:(r=(0,a.A)(c().mark((function t(){var r,a,s;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=2;break}return t.abrupt("return");case 2:return e(!1),null==F||null===(r=F._paymentPopupHandle)||void 0===r||null===(a=r.hideFunc)||void 0===a||a.call(r),t.next=6,(0,j.Lb)({parentOrderSn:A});case 6:return s=t.sent,t.next=9,(0,O.A)(200);case 9:(0,_e.Mw)(ye(ye({},x),{},{onRetryChangeAddress:function(){var e;return null==F||null===(e=F.handleRetryChangeAddress)||void 0===e?void 0:e.call(F,F.parentOrderSn,s)},type:ue.LOW_TAX_TO_HIGH_RESULT_MODAL_TYPE.timeout,addressInfo:s||{},changeAddressSource:F.changeAddressSource}));case 10:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)}),onConfirm:(t=(0,a.A)(c().mark((function t(r){var s,l,d,m,f,_,S,b,E,O,P,I,x,k,L,D,H,B,M,W,Y,U,G,K,V;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=2;break}return t.abrupt("return");case 2:return n=!0,l={},F.editShippingAddressBaseKvLog("editShippingAddressLowToHighPaymentStart",{customFields:ye({},F.kvParams||{})}),t.next=7,F.handleBeforePaymentJump({parentOrderSn:F.parentOrderSn,serialNo:o,addressSnapshotId:T,addressSnapshotSn:N,changeAddressSource:F.changeAddressSource});case 7:return d={pay_ticket:null==r?void 0:r.payTicket,cashier_trans_info:null==r?void 0:r.cashierTransInfo},(null==r?void 0:r.appId)===v.sk.Paypal&&(null!=r&&null!==(m=r.extraMap)&&void 0!==m&&m.signed?d.action=null!=r&&r.usePaypalSigned?"token-pay":"one-time-pay":d.action=null!=r&&null!==(f=r.extraMap)&&void 0!==f&&f.appointedPaypalBindContract?"bind-and-pay":"one-time-pay"),t.next=11,(0,h.A)({pageSn:F.pageSn,paymentChannelVo:r,paymentVo:w,totalAmount:Number(null==R?void 0:R.needPayTaxAmount),jump3dsOptions:{successUrl:(0,p.rE)({edit_shipping_address_auth_status:be.success},window.location.href),processUrl:(0,p.rE)({edit_shipping_address_auth_status:be.processing},window.location.href),failUrl:(0,p.rE)({edit_shipping_address_auth_status:be.failed},window.location.href)},otherOpts:{customPreAuthCallbackUrl:(0,p.rE)({edit_shipping_address_auth_status:be.preAuthBack},window.location.href),customCreateAndPay:function(){var e=(0,a.A)(c().mark((function e(){var n,t,r=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>0&&void 0!==r[0]?r[0]:{},e.next=3,(0,j.el)(ye({parentOrderSn:F.parentOrderSn||"",serialNo:o,payAppId:null==n?void 0:n.pay_app_id,changeAddressSource:F.changeAddressSource},n||{}));case 3:return t=e.sent,l=(0,C.A)(t),e.abrupt("return",(0,_e.Vy)(l));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},paymentExtra:d});case 11:_=t.sent,n=!1,null===(s=F.handleRemovePaymentParams)||void 0===s||s.call(F),b=(S=_||{}).resultCode,S.response,S.orderInfo,F.editShippingAddressBaseKvLog("editShippingAddressLowToHighPaymentResult",{customFields:ye(ye({},F.kvParams||{}),{},{resultCode:String(b)})}),v.hq.Success===b&&(null==F||null===(E=F._paymentPopupHandle)||void 0===E||null===(O=E.hideFunc)||void 0===O||O.call(E),e(F.checkPollingUpdateStatus({serialNo:o,userConfirmType:i,forbidLowToHighPollingCancel:!0}))),v.hq.Processing===b&&(null==F||null===(P=F._paymentPopupHandle)||void 0===P||null===(I=P.hideFunc)||void 0===I||I.call(P),e(F.checkPollingUpdateStatus({serialNo:o,userConfirmType:i,forbidLowToHighPollingCancel:!0,onPollingError:function(){(0,g.S7)({title:u.Ay.t("edit-address-payment-processing",{ns:"bgt_order_detail"}),confirmButtonLabel:u.Ay.t("ok",{ns:"bgt_order_detail"})})}}))),v.hq.Fail===b&&((0,y.W$)(),null==F||null===(x=F._paymentPopupHandle)||void 0===x||null===(k=x.hideFunc)||void 0===k||k.call(x),W=null===(L=l)||void 0===L||null===(D=L.errorPayload)||void 0===D||null===(H=D.viewObject)||void 0===H?void 0:H.title,Y=(null===(B=l)||void 0===B?void 0:B.needRollbackSource)||!1,void 0!==(null===(M=l)||void 0===M?void 0:M.success)&&W?(F.editShippingAddressBaseKvLog("editShippingAddressLowToHighPaymentError",{customFields:ye(ye({},F.kvParams||{}),{},{resultCode:String(b)})}),Y&&(0,_e.gb)({parentOrderSn:A,serialNo:o,changeAddressSource:F.changeAddressSource}),(0,g.S7)({title:W,confirmButtonLabel:u.Ay.t("ok",{ns:"bgt_order_detail"})}),e(!1)):e(F.checkPollingUpdateStatus({serialNo:o,userConfirmType:i,forbidLowToHighPollingCancel:!0,onPollingError:function(){(0,_e.gb)({parentOrderSn:A,serialNo:o,changeAddressSource:F.changeAddressSource}),(0,g.S7)({title:u.Ay.t("edit-address-payment-failed",{ns:"bgt_order_detail"}),confirmButtonLabel:u.Ay.t("bgt_order_detail:ok")})}}))),v.hq.Canceled===b&&(null==F||null===(U=F._paymentPopupHandle)||void 0===U||null===(G=U.ref)||void 0===G||null===(K=G.current)||void 0===K||null===(V=K.refreshPaymentList)||void 0===V||V.call(K),(0,y.W$)());case 20:case"end":return t.stop()}}),t)}))),function(e){return t.apply(this,arguments)}),onClose:function(){(0,_e.gb)({parentOrderSn:A,serialNo:o,changeAddressSource:F.changeAddressSource}),e(!1)}}))}else D||0!==_?D&&(F.editShippingAddressBaseKvLog("editShippingAddressLowToHighPaymentSuccess",{customFields:ye({},F.kvParams||{})}),(0,_e.Mw)(ye(ye({},x),{},{onRetryChangeAddress:function(){var e;return null==F||null===(e=F.handleRetryChangeAddress)||void 0===e?void 0:e.call(F,F.parentOrderSn,S)},type:ue.LOW_TAX_TO_HIGH_RESULT_MODAL_TYPE.success,addressInfo:S||{},changeAddressSource:F.changeAddressSource,changeSucShowInfo:B})),e(!0)):(F.editShippingAddressBaseKvLog("editShippingAddressLowToHighPaymentTimeout",{customFields:ye({},F.kvParams||{})}),(0,_e.Mw)(ye(ye({},x),{},{onRetryChangeAddress:function(){var e;return null==F||null===(e=F.handleRetryChangeAddress)||void 0===e?void 0:e.call(F,F.parentOrderSn,S)},type:ue.LOW_TAX_TO_HIGH_RESULT_MODAL_TYPE.timeout,addressInfo:S||{},changeAddressSource:F.changeAddressSource})),e(!1));var t,r})));case 32:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l||H||null!=I&&I.isTimeout||(0,_e.gb)({parentOrderSn:A,serialNo:o,changeAddressSource:this.changeAddressSource}),!d||D){e.next=17;break}return this.editShippingAddressBaseKvLog("editShippingAddressLowToHighPollingFailed",{customFields:ye({},this.kvParams||{})}),(0,y.W$)(),null==d||d(),e.abrupt("return",!1);case 17:if(null==I||!I.isTimeout){e.next=20;break}return(0,y.W$)(),e.abrupt("return",this.showRetry(I,n,{isLowTaxToHighPayment:!0}));case 20:if(L!==M.gL.TaxChangeToHigher||!H){e.next=22;break}return e.abrupt("return",W());case 22:if(null==I||!I.errorMsg){e.next=27;break}return this.editShippingAddressBaseKvLog("editShippingAddressFailed",{customFields:ye({},this.kvParams||{})}),(0,y.W$)(),(0,g.S7)({title:null==I?void 0:I.errorMsg,confirmButtonLabel:u.Ay.t("bgt_order_detail:ok")}),e.abrupt("return",!1);case 27:return(0,y.W$)(),e.abrupt("return",this.showRetry(I,n,{isLowTaxToHighPayment:!0}));case 29:if((0,y.W$)(),!D){e.next=36;break}this.editShippingAddressBaseKvLog("editShippingAddressSuccess",{customFields:ye({},this.kvParams||{})}),i!==M.qL.confirm&&L!==M.gL.TaxChangeSuccess||!R?null!=B&&B.length&&(this.editShippingAddressBaseKvLog("editShippingAddressShowOvertimePayoutInfo",{customFields:ye(ye({},this.kvParams||{}),{},{infoCount:null==B?void 0:B.length})}),ge({changeSucShowInfo:B})):ce(ye(ye({},x),{},{type:ie.DIRECT_CHANGE_ADDRESS,checkExtraInfoDto:R,onClose:function(){null!=B&&B.length&&(F.editShippingAddressBaseKvLog("editShippingAddressShowOvertimePayoutInfoHighToLow",{customFields:ye(ye({},F.kvParams||{}),{},{infoCount:null==B?void 0:B.length}),customTags:{logLevel:_.$b.normal}}),ge({changeSucShowInfo:B}))}})),null!=B&&B.length||(0,b.n)(u.Ay.t("bgt_order_detail:edit-address.updated-successfully")),e.next=37;break;case 36:return e.abrupt("return",this.handlePollingError(I,n,D||!1));case 37:return e.abrupt("return",D||!1);case 38:case"end":return e.stop()}}),e,this)}))),function(e){return P.apply(this,arguments)})},{key:"handlePollingError",value:(l=(0,a.A)(c().mark((function e(n,t,r){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n||!n.isTimeout){e.next=2;break}return e.abrupt("return",this.showRetry(n,t));case 2:if(null==n||!n.errorMsg){e.next=6;break}return this.editShippingAddressBaseKvLog(null!=t&&t.addressBatchId?"editShippingAddressBatchUpdateFailed":"editShippingAddressFailed",{}),(0,g.S7)({title:null==n?void 0:n.errorMsg,confirmButtonLabel:u.Ay.t("bgt_order_detail:ok")}),e.abrupt("return",r);case 6:return e.abrupt("return",this.showRetry(n,t));case 7:case"end":return e.stop()}}),e,this)}))),function(e,n,t){return l.apply(this,arguments)})},{key:"checkPollingBatchUpdateAddressResult",value:(s=(0,a.A)(c().mark((function e(n){var t,r,a,s,o,i,l,u,d;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(t=n||{}).serialNo,a=t.addressBatchId,s=(this||{}).parentOrderSn,o=void 0===s?"":s,e.next=4,(0,_e.o7)({parentOrderSn:o,serialNo:r,pageSn:this.pageSn,changeAddressSource:this.changeAddressSource,addressBatchId:a,parentOrderList:this.parentOrderList});case 4:if(i=e.sent,u=(l=i||{}).updateSuccess,d=l.updateResult,(0,y.W$)(),!u){e.next=12;break}this.editShippingAddressBaseKvLog("editShippingAddressBatchUpdateSuccess",{customFields:{updateResult:d},customTags:{logLevel:_.$b.core}}),ee({res:i,parentOrderSn:this.parentOrderSn}),e.next=13;break;case 12:return e.abrupt("return",this.handlePollingError(i,n,u||!1));case 13:return e.abrupt("return",u||!1);case 14:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"handleEditShippingAddress",value:(n=(0,a.A)(c().mark((function e(n){var s,o,i,l,p,m,f,h,v,S,E,O,C,P,T,N,w,I,x,k,L,R,D,H,B,W,F,Y,U,G,K,V,q,z,X,$=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.process(n),m=(p=n||{}).addressSnapshotId,f=p.addressSnapshotSn,h=p.userConfirmType,v=void 0===h?M.qL.confirm:h,S=p.isUnpaidOrder,E=void 0!==S&&S,O=p.parentOrderSn,C=void 0===O?"":O,P=p.changeAddressPrePopType,this.kvParams={changeAddressSource:this.changeAddressSource||"",changeAddressPrePopType:String(P)},C&&(m||f)||this.editShippingAddressBaseKvLog("editShippingAddressWithoutParam",{customFields:ye({},this.kvParams||{})}),this.editShippingAddressBaseKvLog("editShippingAddressStart",{customFields:ye({},this.kvParams||{})}),T=this.changeAddressPrePopType===M.a1.SAVE_TRANSACTION_UNIQUE_SN_BATCH_CHANGE_ADDRESS,N=this.addressBatchId&&null!==(s=this.parentOrderList)&&void 0!==s&&s.length&&!T?function(){return(0,j.zE)({addressBatchId:$.addressBatchId||"",parentOrderList:$.parentOrderList||[],addressSnapshotId:m,addressSnapshotSn:f,parentOrderSn:C||"",userConfirmType:v,pageSn:$.pageSn,changeAddressSource:$.changeAddressSource})}:null!==(o=this.parentOrderList)&&void 0!==o&&o.length&&T?function(){return(0,j.$D)({parentOrderList:$.parentOrderList||[],addressSnapshotId:m,addressSnapshotSn:f,parentOrderSn:C||"",userConfirmType:v,pageSn:$.pageSn,changeAddressSource:$.changeAddressSource})}:function(){var e;return(0,j.bX)({addressSnapshotId:m,addressSnapshotSn:f,parentOrderSn:C||"",userConfirmType:v,pageSn:$.pageSn,changeAddressSource:$.changeAddressSource,sessionId:null==n||null===(e=n.verifyRes)||void 0===e?void 0:e.session_id})},(0,y.xc)(),e.next=10,Promise.all([N(),new Promise((function(e){setTimeout((function(){e(!0),(0,y.xc)()}),0)}))]);case 10:if(w=e.sent,I=(0,r.A)(w,1),x=I[0],L=(k=x||{}).asyncResult,R=k.serialNo,D=k.resultType,H=k.alterInfo,B=k.errorCode,W=ye(ye({},n),{},{enableEmbedded:this.enableEmbedded,serialNo:R}),L||D!==M.gL.TaxChangeToHigher||!H){e.next=19;break}return this.editShippingAddressBaseKvLog("editShippingAddressLowTaxToHigh",{customFields:ye({},this.kvParams||{})}),(0,y.W$)(),e.abrupt("return",new Promise((function(e){var n;ce(ye(ye({},W),{},{alterInfo:H,onConfirm:(n=(0,a.A)(c().mark((function n(){var t;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return $.editShippingAddressBaseKvLog("editShippingAddressLowTaxToHighConfirm",{customFields:ye({},$.kvParams||{})}),n.next=3,$.handleEditShippingAddress(ye(ye({},W),{},{userConfirmType:M.qL.confirmLowToHigh}));case 3:t=n.sent,e(t);case 5:case"end":return n.stop()}}),n)}))),function(){return n.apply(this,arguments)}),onCancel:function(){$.editShippingAddressBaseKvLog("editShippingAddressLowTaxToHighCancel",{customFields:ye({},$.kvParams||{})}),e(!1)},type:ie.LOW_TAX_TO_HIGH}))})));case 19:if(!L||!R){e.next=21;break}return e.abrupt("return",this.checkPollingUpdateStatus({serialNo:R,userConfirmType:v,addressBatchId:null==x?void 0:x.addressBatchId}));case 21:if(L||D!==M.gL.MobileVerify||!H){e.next=38;break}return e.next=24,Promise.all([(0,_e.L5)((function(){return t.e(3227).then(t.bind(t,95608))}))]);case 24:if(F=e.sent,Y=(0,r.A)(F,1),U=Y[0],G=(U||{}).showMobileCodeVerifyModal,(0,y.W$)(),G){e.next=32;break}return this.editShippingAddressBaseKvLog("editShippingAddressLoadScriptError",{customFields:ye({},this.kvParams||{}),customTags:{logLevel:_.$b.normal}}),e.abrupt("return",this.showRetry());case 32:return e.next=34,G({parentOrderSn:C,addressSnapshotId:m,addressSnapshotSn:f,kvParams:this.kvParams,alterInfo:H});case 34:if(!(K=e.sent)){e.next=37;break}return e.abrupt("return",this.handleEditShippingAddress(ye(ye({},n),{},{verifyRes:K})));case 37:return e.abrupt("return",!1);case 38:if(L||D!==M.gL.TaxChange||!H){e.next=42;break}return this.editShippingAddressBaseKvLog("editShippingAddressHighTaxToLow",{customFields:ye({},this.kvParams||{})}),(0,y.W$)(),e.abrupt("return",new Promise((function(e){var n;ce(ye(ye({},W),{},{alterInfo:H,onConfirm:(n=(0,a.A)(c().mark((function n(){var t;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return $.editShippingAddressBaseKvLog("editShippingAddressHighTaxToLowConfirm",{customFields:ye({},$.kvParams||{})}),n.next=3,$.handleEditShippingAddress(ye(ye({},W),{},{userConfirmType:M.qL.confirm}));case 3:t=n.sent,e(t);case 5:case"end":return n.stop()}}),n)}))),function(){return n.apply(this,arguments)}),onCancel:function(){$.editShippingAddressBaseKvLog("editShippingAddressHighTaxToLowCancel",{customFields:ye({},$.kvParams||{})}),e(!1)}}))})));case 42:if(V=(null==x||null===(i=x.errorPayload)||void 0===i||null===(l=i.viewObject)||void 0===l?void 0:l.title)||"",(0,y.W$)(),!V){e.next=49;break}return this.editShippingAddressBaseKvLog("editShippingAddressFailed",{customFields:ye({},this.kvParams||{})}),900078===B&&(null===(q=this.onRefreshOrderInfo)||void 0===q||q.call(this)),E?A.A.error(V):(0,g.S7)({title:V,confirmButtonLabel:u.Ay.t("bgt_order_detail:ok")}),e.abrupt("return",!1);case 49:if(D!==M.gL.MerchantAudit){e.next=58;break}return this.editShippingAddressBaseKvLog("editShippingAddressMerchantAudit",{customFields:ye({haveTitle:!(null==H||!H.alertTitle),haveContent:!(null==H||null===(z=H.alertContentRich)||void 0===z||!z.length)},this.kvParams||{})}),(0,y.xc)(),e.next=54,(0,j.Lb)({parentOrderSn:C,queryAddressScene:1});case 54:return X=e.sent,(0,y.W$)(),(0,de.o)({alertTitle:null==H?void 0:H.alertTitle,alertContent:null==H?void 0:H.alertContentRich,addressInfo:X,parentOrderSn:C,onClose:function(){}}),e.abrupt("return",!0);case 58:if(!x.serverTime){e.next=62;break}return this.editShippingAddressBaseKvLog("editShippingAddressSuccess",{customFields:ye({},this.kvParams||{})}),E?A.A.success(u.Ay.t("bgt_order_detail:edit-address.edit-address-successfully")):(0,b.n)(u.Ay.t("bgt_order_detail:edit-address.updated-successfully")),e.abrupt("return",!0);case 62:if(!E){e.next=66;break}return this.editShippingAddressBaseKvLog("editShippingAddressFailed",{customFields:ye({},this.kvParams||{})}),(0,d.A)(u.Ay.t("bgt_order_detail:edit-address.edit-address-failed")),e.abrupt("return",!1);case 66:return e.abrupt("return",this.showRetry());case 67:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"showRetry",value:function(e,n,t){var r=this,a=(null==e?void 0:e.errorMsg)||u.Ay.t("bgt_order_detail:network-error");return this.editShippingAddressBaseKvLog("editShippingAddressShowRetryModal",{customFields:ye({},this.kvParams||{})}),new Promise((function(e){(0,g.GQ)({verticalButton:!0,title:a,onClose:function(){r.editShippingAddressBaseKvLog("editShippingAddressCloseRetry",{customFields:ye({},r.kvParams||{})}),null!=t&&t.isLowTaxToHighPayment&&null!=n&&n.serialNo&&(0,_e.gb)({parentOrderSn:r.parentOrderSn,serialNo:null==n?void 0:n.serialNo,changeAddressSource:r.changeAddressSource}),e(!1)},onCancel:function(){r.editShippingAddressBaseKvLog("editShippingAddressCancelRetry",{customFields:ye({},r.kvParams||{})}),null!=t&&t.isLowTaxToHighPayment&&null!=n&&n.serialNo&&(0,_e.gb)({parentOrderSn:r.parentOrderSn,serialNo:null==n?void 0:n.serialNo,changeAddressSource:r.changeAddressSource}),e(!1)},onConfirm:function(){r.editShippingAddressBaseKvLog("editShippingAddressRetry",{customFields:ye({},r.kvParams||{})}),n&&(0,y.xc)();var t=n?r.checkPollingUpdateStatus(n):r.handleEditShippingAddress({userConfirmType:M.qL.confirm,parentOrderSn:r.parentOrderSn,addressSnapshotId:r.addressSnapshotId,addressSnapshotSn:r.addressSnapshotSn,changeAddressPrePopType:r.changeAddressPrePopType});e(t||!1)},confirmButtonLabel:u.Ay.t("bgt_order_detail:edit-address.try-again"),cancelButtonLabel:u.Ay.t("bgt_order_detail:edit-address.cancel")})}))}}]),e}(),Oe=Ee},73466:function(e,n,t){"use strict";t.d(n,{$D:function(){return A},Lb:function(){return E},UU:function(){return b},Y0:function(){return g},_U:function(){return _},bX:function(){return h},cP:function(){return O},el:function(){return S},ll:function(){return C},oN:function(){return y},qF:function(){return P},zE:function(){return v}});t(79432),t(52675),t(2008),t(26099),t(83851),t(44114),t(23500),t(81278),t(67945),t(84185);var r=t(61877),a=t(56687),s=t(74533),o=t(11286),i=t.n(o),l=t(78295),c=t(45189),u=t(96707),d=t(99232),p=["parentOrderSn","serialNo","paySchemeItems","payAppId","changeAddressSource"];function m(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function f(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?m(Object(t),!0).forEach((function(n){(0,r.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var h=function(){var e=(0,s.A)(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.zS)("api/bg/pasta/user/update_order_address",{parent_order_sn:n.parentOrderSn,address_snapshot_id:n.addressSnapshotId,address_snapshot_sn:n.addressSnapshotSn,user_confirm_type:n.userConfirmType,page_sn:(0,u.hE)()||n.pageSn,change_address_source:n.changeAddressSource,session_id:n.sessionId,extra:{merchant_audit:!0}},d.A).catch((function(e){return(0,l.Yw)(e)})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),v=function(){var e=(0,s.A)(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.zS)("api/bg/pasta/user/multi_update_order_address",{address_batch_id:n.addressBatchId,parent_order_list:n.parentOrderList,parent_order_sn:n.parentOrderSn,address_snapshot_id:n.addressSnapshotId,address_snapshot_sn:n.addressSnapshotSn,user_confirm_type:n.userConfirmType,page_sn:(0,u.hE)()||n.pageSn,change_address_source:n.changeAddressSource},d.A).catch((function(e){return(0,l.Yw)(e)})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),A=function(){var e=(0,s.A)(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.zS)("/api/bg/pasta/user/batch_update_relevance_parent_order_address",{parent_order_sn:n.parentOrderSn,parent_order_list:n.parentOrderList,address_snapshot_id:n.addressSnapshotId,address_snapshot_sn:n.addressSnapshotSn,user_confirm_type:n.userConfirmType,page_sn:(0,u.hE)()||n.pageSn,change_address_source:n.changeAddressSource,extra:{merchant_audit:!0}},d.A,{}).catch((function(e){return(0,l.Yw)(e)})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),g=function(){var e=(0,s.A)(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.zS)("api/bg/pasta/user/check_update_address_result",{parent_order_sn:n.parentOrderSn,serial_no:n.serialNo,page_sn:(0,u.hE)()||n.pageSn,change_address_source:n.changeAddressSource},d.A).catch((function(e){return(0,l.Yw)(e)})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),_=function(){var e=(0,s.A)(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.zS)("api/bg/pasta/user/check_batch_update_address_result",{parent_order_sn:n.parentOrderSn,parent_order_list:n.parentOrderList,address_batch_id:n.addressBatchId,serial_no:n.serialNo,page_sn:(0,u.hE)()||n.pageSn,change_address_source:n.changeAddressSource},d.A,{}).catch((function(e){return(0,l.Yw)(e)})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),S=function(){var e=(0,s.A)(i().mark((function e(n){var t,r,s,o,m,h;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.parentOrderSn,r=n.serialNo,s=n.paySchemeItems,o=n.payAppId,m=n.changeAddressSource,h=(0,a.A)(n,p),e.abrupt("return",(0,c.zS)("api/bg/pasta/pay/user/pay_change_address_tax",f({parent_order_sn:t,serial_no:r,pay_scheme_items:s,pay_app_id:o,page_sn:(0,u.hE)(),change_address_source:m},h||{}),d.A).catch((function(e){return(0,l.Yw)(e)})));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),y=function(){var e=(0,s.A)(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.zS)("api/bg/pasta/pay/user/query_cashier_list",{parent_order_sn:n.parentOrderSn,serial_no:n.serialNo,payment_extra:n.paymentExtra,page_sn:(0,u.hE)(),change_address_source:n.changeAddressSource},d.A).catch((function(e){return(0,l.Yw)(e)})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),b=function(){var e=(0,s.A)(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.zS)("api/bg/pasta/pay/user/cancel",{parent_order_sn:n.parentOrderSn,serial_no:n.serialNo,page_sn:(0,u.hE)(),change_address_source:n.changeAddressSource},d.A).catch((function(e){return(0,l.Yw)(e)})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),E=function(){var e=(0,s.A)(i().mark((function e(n){var t,r,a,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.zS)("api/bg-origenes/order/address/query/strict",{parent_order_sn:n.parentOrderSn,query_address_scene:null!==(t=null==n?void 0:n.queryAddressScene)&&void 0!==t?t:null,enable_master:!0},d.A).catch((function(e){return(0,l.Yw)(e)}));case 2:return s=e.sent,e.abrupt("return",f(f({},(null==s?void 0:s.result)||{}),{},{receiveName:null==s||null===(r=s.result)||void 0===r?void 0:r.name,contactMobile:null==s||null===(a=s.result)||void 0===a?void 0:a.mobile}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),O=function(){var e=(0,s.A)(i().mark((function e(n){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,c.zS)("api/bg/pasta/user/query_multi_order_info_list",{parent_order_sn:n.parentOrderSn,address_batch_id:n.addressBatchId},d.A).catch((function(e){return(0,l.Yw)(e)})),e.abrupt("return",t);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),C=function(){var e=(0,s.A)(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.zS)("api/bg/pasta/user/query_change_address_status",{parent_order_sn:null==n?void 0:n.parentOrderSn},d.A).catch((function(e){return(0,l.Yw)(e)})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),P=function(){var e=(0,s.A)(i().mark((function e(n){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,c.zS)("/api/bg/pasta/user/query_relevance_parent_order_info_list",{parent_order_sn:n.parentOrderSn},d.A,{}).catch((function(e){return(0,l.Yw)(e)})),e.abrupt("return",t);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},27403:function(e,n,t){"use strict";t.d(n,{Ch:function(){return u},a1:function(){return r},gK:function(){return a},gL:function(){return i},nG:function(){return o},pC:function(){return s},qL:function(){return c},w7:function(){return l}});var r=function(e){return e[e.MULTIPLE_CHANGE_ADDRESS=1]="MULTIPLE_CHANGE_ADDRESS",e[e.SAVE_TRANSACTION_UNIQUE_SN_BATCH_CHANGE_ADDRESS=2]="SAVE_TRANSACTION_UNIQUE_SN_BATCH_CHANGE_ADDRESS",e[e.ORDER_PACKAGED_OR_SHIPPED_CANNOT_CHANGE_ADDRESS=3]="ORDER_PACKAGED_OR_SHIPPED_CANNOT_CHANGE_ADDRESS",e}({}),a=function(e){return e[e.ORDINARY_CHANGE_ADDRESS=1]="ORDINARY_CHANGE_ADDRESS",e[e.TAX_CHANGE_ADDRESS=2]="TAX_CHANGE_ADDRESS",e[e.SHOP_CHANGE_ADDRESS=3]="SHOP_CHANGE_ADDRESS",e[e.MULTIPLE_TAX_CHANGE_ADDRESS=4]="MULTIPLE_TAX_CHANGE_ADDRESS",e[e.MULTIPLE_ORDINARY_CHANGE_ADDRESS=5]="MULTIPLE_ORDINARY_CHANGE_ADDRESS",e[e.MULTIPLE_SHOP_CHANGE_ADDRESS=6]="MULTIPLE_SHOP_CHANGE_ADDRESS",e}({}),s=function(e){return e[e.EDIT=1]="EDIT",e}({}),o=function(e){return e[e.Tax=1]="Tax",e[e.Pickup=2]="Pickup",e[e.Edit=3]="Edit",e}({}),i=function(e){return e[e.Success=0]="Success",e[e.TaxChange=1]="TaxChange",e[e.TaxChangeSuccess=2]="TaxChangeSuccess",e[e.TaxChangeToHigher=3]="TaxChangeToHigher",e[e.MerchantAudit=4]="MerchantAudit",e[e.MobileVerify=5]="MobileVerify",e}({}),l=function(e){return e[e.MerchantReview=1]="MerchantReview",e[e.ModifiedAddressSuccess=2]="ModifiedAddressSuccess",e[e.ModifiedAddressFail=3]="ModifiedAddressFail",e}({}),c=function(e){return e[e.confirm=1]="confirm",e[e.confirmLowToHigh=3]="confirmLowToHigh",e}({}),u=function(e){return e[e.AllSuccess=0]="AllSuccess",e[e.SuccessAndTimeChange=1]="SuccessAndTimeChange",e[e.AllMerchantAudit=2]="AllMerchantAudit",e[e.NotUniqueOrAllFail=3]="NotUniqueOrAllFail",e}({})},4118:function(e,n,t){"use strict";t.d(n,{gb:function(){return Z},Jt:function(){return oe},b$:function(){return ee},o7:function(){return ne},kQ:function(){return re},Vy:function(){return se},L5:function(){return ae},Mw:function(){return te}});t(79432),t(52675),t(2008),t(83851),t(44114),t(23500),t(81278),t(67945),t(84185);var r=t(61877),a=t(56687),s=t(74533),o=(t(26099),t(3362),t(11286)),i=t.n(o),l=t(72635),c=t(8515),u=t(86482),d=t(63580),p=t(53001),m=t(75975),f=t(14242),h=(t(62062),t(28706),t(33514)),v=t(32485),A=t.n(v),g=t(65309),_=t(95789),S=t(97582),y=t(91793),b=t(67388),E=h.forwardRef((function(e,n){var t,r=(0,S.B)("bec-fe.svg-icons-pc"),a=r.t,s=r.i18n;return h.createElement(b.i,(0,f.A)({ref:n,fill:"#000000"},e,{path:["M512 13.2c275.5 0 498.8 223.3 498.8 498.8 0 275.5-223.3 498.8-498.8 498.8-275.5 0-498.8-223.3-498.8-498.8 0-275.5 223.3-498.8 498.8-498.8z m0 66.7c-238.6 0-432.1 193.4-432.1 432.1 0 238.6 193.4 432.1 432.1 432.1 238.6 0 432.1-193.4 432.1-432.1 0-238.6-193.4-432.1-432.1-432.1z m273.2 265.3c11.9 11.8 13 30.4 3.4 43.5l-3.3 3.7-320 322.2c-11.3 11.4-29 13-42 4.4l-4.2-3.2-164.4-149.9c-13.6-12.4-14.6-33.5-2.1-47.1 11.3-12.4 29.8-14.3 43.2-5.3l3.9 3.1 140.8 128.3 297.5-299.5c13-13.1 34.1-13.2 47.2-0.2z"],"aria-label":null!==(t=e["aria-label"])&&void 0!==t?t:s.exists("aria-label.DuigouRuo",{ns:"bec-fe.svg-icons-pc"})?a("aria-label.DuigouRuo"):void 0,rtlPath:[]}))}));E.supportRtl=!1;var O=E,C=t(8565),P=t(59717),T=t(16895),N=t(51688),w=t(56408),I=t(35425),x=t.n(I),k=function(e){return e[e.success=0]="success",e[e.timeout=1]="timeout",e}({}),L=function(){var e=(0,S.B)("bgt_order_detail").t;return h.createElement("div",{className:x().successWrapper},h.createElement("div",{className:x().title},h.createElement(g.d,{className:x().iconWrapper},h.createElement(O,{className:x().icon})),h.createElement("span",null,e("tax-payment-successful-title"))))},R=function(){var e=(0,S.B)("bgt_order_detail").t;return h.createElement(h.Fragment,null,h.createElement("div",{className:x().timeoutWrapper},h.createElement("div",{className:x().title},h.createElement(g.d,{className:x().iconWrapper},h.createElement(O,{className:x().icon})),h.createElement("span",null,e("tax-payment-timeout-title"))),h.createElement("div",{className:x().desc},e("tax-payment-timeout-desc"))))},D=function(e){var n=e.addressInfo,t=e.onClickEdit,r=(0,S.B)("bgt_order_detail").t,a=(0,(0,S.B)("global").t)("comma",{defaultValue:","}),s=n||{},o=s.name,i=s.receiveName,l=s.displayMobile,c=s.contactMobile,u=s.addressLine1,d=s.addressLine2,p=s.addressSnapshotId,m=s.addressSnapshotSn,f=s.regionName1,v=s.regionName2,g=s.regionName3,_=s.regionName4,b=s.postCode,E=s.phoneCode,O=(s.addressId,s.displayAddressItem),C=O?O.map((function(e){return e.map((function(e){return e.text}))})):[],P=(0,h.useMemo)((function(){return E&&(l||c)?"+".concat(E):""}),[c,l,E]);return p||m?h.createElement("div",{className:x().addressInfoWrapper},h.createElement("div",{className:x().editBtn,onClick:function(e){var n;null==e||null===(n=e.stopPropagation)||void 0===n||n.call(e),null==t||t()}},r("edit"),h.createElement(y.A,{className:x().icon})),h.createElement("div",{className:A()(x().ellipsis,x().info)},i||o?h.createElement("span",{className:x().receiveName},i||o):null,P&&(l||c)?h.createElement("span",{className:x().mobile,dir:"ltr"},"".concat(P," ").concat(l||c)):null),h.createElement("div",{className:A()(x().ellipsis,x().address)},null!=C&&C[1]?(0,w.A)({addressArray:null==C?void 0:C[1],linkCharacters:""}):(0,w.A)({addressArray:[u,d].filter((function(e){return!!e})),linkCharacters:a})),h.createElement("div",{className:A()(x().ellipsis,x().region)},null!=C&&C[2]?(0,w.A)({addressArray:null==C?void 0:C[2],linkCharacters:""}):(0,w.A)({addressArray:_?[_,"".concat(b||""," ").concat(g||""),v,f].filter((function(e){return!!e})):[g,"".concat(v||""," ").concat(b||""),f].filter((function(e){return!!e})),linkCharacters:a}))):null},H=function(e){var n=e.onClose,t=e.onConfirm,r=e.type,a=void 0===r?k.success:r,s=e.addressInfo,o=e.onClickEdit,i=e.changeAddressSource,l=e.changeSucShowInfo,c=(0,S.B)("bgt_order_detail").t;(0,h.useEffect)((function(){(0,d.xv)("lowToHighPaymentResultModalShow",{customTags:{bizScene:"editShippingAddress",changeAddressSource:i||""}})}),[]);var u=(0,h.useCallback)((function(){(0,d.xv)("lowToHighPaymentResultModalConfirm",{customTags:{bizScene:"editShippingAddress",changeAddressSource:i||""}}),null==t||t()}),[i,t]),p=(0,h.useMemo)((function(){return a===k.success?c("ok"):c("change-address-again")}),[c,a]),m=(0,h.useCallback)((function(){return h.createElement(C.A,{page_el_sn:0},h.createElement("div",{className:x().buttonWrapper},h.createElement("div",{className:x().button,onClick:u},h.createElement("span",{className:x().btnText},p))))}),[p,u]),f=function(){return a===k.success&&null!=l&&l.length?null:a===k.success?h.createElement("div",{className:x().successDesc},c("tax-payment-successful-desc")):h.createElement("div",{className:x().addressDesc},c("tax-payment-timeout-address-desc"))};return h.createElement(P.A,{size:"md"},h.createElement(P.A.StaticContainer,null,h.createElement(P.A.CloseButton,{onClick:n}),h.createElement(P.A.Title,null,a===k.success?h.createElement(L,null):h.createElement(R,null))),h.createElement(P.A.ScrollContainer,null,h.createElement(f,null),null!=l&&l.length?h.createElement("div",{className:x().updateSucInfoWrapper},(l||[]).map((function(e,n){return h.createElement("div",{className:x().updateSucInfo,key:n},(0,T.A)(e||"",{replace:function(e){return(0,N.A)(e,{enableConvertRTLStyles:!0})}}))}))):null,h.createElement("div",{className:x().addressInfoContainer},h.createElement(D,{addressInfo:s,onClickEdit:o}))),h.createElement(P.A.StaticContainer,null,h.createElement(m,null)))},B=function(e){var n=e||{},t=n.onClose,r=n.onConfirm,a=n.onClickEdit,s=null;s=(0,_.A)(h.createElement(H,(0,f.A)({},e,{onClickEdit:function(){var e;null===(e=s)||void 0===e||e(),null==a||a()},onClose:function(){var e;null===(e=s)||void 0===e||e(),null==t||t()},onConfirm:function(){var e;null===(e=s)||void 0===e||e(),null==r||r()}})),{})},j=t(1794),M=t(6356),W=(t(23792),t(47764),t(62953),t(58746));function F(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Y(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?F(Object(t),!0).forEach((function(n){(0,r.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):F(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var U=function(e){var n=e.editAddressFunc,t=e.onPollingRetry,r=e.maxRetryTimes,a=void 0===r?8:r,o=e.minReqDelayTime,l=void 0===o?600:o;return new Promise(function(){var e=(0,s.A)(i().mark((function e(r){var s,o,c,u,d,p,m,f,h,v,A,g,_,S;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=1,o={};case 2:if(!(s<=a)){e.next=24;break}return t&&(null==t||t(s)),e.next=6,Promise.all([n(),(0,W.A)(l)]);case 6:if(c=e.sent,u=(0,M.A)(c,1),d=u[0],m=(p=d||{}).queryResult,f=p.success,h=p.serverTime,v=p.updateResult,void 0!==f&&(o={serverTime:h,errorMsg:(null==d||null===(A=d.failPayload)||void 0===A||null===(g=A.viewObject)||void 0===g?void 0:g.title)||(null==d||null===(_=d.defaultPayload)||void 0===_||null===(S=_.viewObject)||void 0===S?void 0:S.title)||""}),!m){e.next=16;break}return r(Y(Y(Y({},d),o),{},{requestSuccess:!0,updateSuccess:"number"==typeof v})),e.abrupt("break",24);case 16:if(null==d||!d.errorCode){e.next=21;break}return r(Y(Y({},o),{},{requestSuccess:!1,updateSuccess:!1})),e.abrupt("break",24);case 21:s++;case 22:e.next=2;break;case 24:r(Y(Y({},o),{},{isTimeout:!0,requestSuccess:!1,updateSuccess:!1}));case 25:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())};function G(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function K(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?G(Object(t),!0).forEach((function(n){(0,r.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):G(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var V=function(e){var n=e.editAddressFunc,t=e.onPollingRetry,r=e.maxRetryTimes,a=void 0===r?8:r,o=e.minReqDelayTime,l=void 0===o?500:o;return new Promise(function(){var e=(0,s.A)(i().mark((function e(r){var s,o,c,u,d,p,m,f,h,v,A,g,_,S,y,b,E,O;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=1,o={};case 2:if(!(s<=a)){e.next=24;break}return t&&(null==t||t(s)),e.next=6,Promise.all([n(),(0,W.A)(l)]);case 6:if(c=e.sent,u=(0,M.A)(c,1),d=u[0],m=(p=d||{}).queryResult,f=p.updateResult,h=p.success,v=p.resultType,A=p.checkExtraInfoDto,g=p.changeSucShowInfo,_=p.countDownEnd,S=p.serverTime,void 0!==h&&(o={resultType:v,checkExtraInfoDto:A,changeSucShowInfo:g,countDownEnd:_,serverTime:S,errorMsg:(null==d||null===(y=d.failPayload)||void 0===y||null===(b=y.viewObject)||void 0===b?void 0:b.title)||(null==d||null===(E=d.defaultPayload)||void 0===E||null===(O=E.viewObject)||void 0===O?void 0:O.title)||""}),!m){e.next=16;break}return r(K(K({},o),{},{requestSuccess:!0,updateSuccess:f})),e.abrupt("break",24);case 16:if(null==d||!d.errorCode){e.next=21;break}return r(K(K({},o),{},{requestSuccess:!1,updateSuccess:!1})),e.abrupt("break",24);case 21:s++;case 22:e.next=2;break;case 24:r(K(K({},o),{},{isTimeout:!0,requestSuccess:!1,updateSuccess:!1}));case 25:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())},q=t(73466),z=t(27403),X=["parentOrderSn","serialNo","pageSn","changeAddressSource"],$=["parentOrderSn","parentOrderList","serialNo","pageSn","changeAddressSource","addressBatchId"];function J(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Q(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?J(Object(t),!0).forEach((function(n){(0,r.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):J(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Z=function(){var e=(0,s.A)(i().mark((function e(n){var t,r,a,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.parentOrderSn,r=n.serialNo,a=n.changeAddressSource,(0,d.Ay)("editShippingAddressLowToHighPollingFailed",{customFields:{parentOrderSn:t||"",serialNo:r||""},customTags:{bizScene:"editShippingAddress",changeAddressSource:a||""}}),e.next=4,(0,q.UU)({parentOrderSn:t,serialNo:r,changeAddressSource:a});case 4:return s=e.sent,e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ee=function(){var e=(0,s.A)(i().mark((function e(n){var t,r,s,o,l,c,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(t=n||{}).parentOrderSn,s=t.serialNo,o=t.pageSn,l=t.changeAddressSource,c=(0,a.A)(t,X),e.next=3,V(Q(Q({},c||{}),{},{editAddressFunc:function(){return(0,q.Y0)({parentOrderSn:r,serialNo:s,changeAddressSource:l,pageSn:o})}}));case 3:return u=e.sent,e.abrupt("return",u);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ne=function(){var e=(0,s.A)(i().mark((function e(n){var t,r,s,o,l,c,u,d,p;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(t=n||{}).parentOrderSn,s=t.parentOrderList,o=t.serialNo,l=t.pageSn,c=t.changeAddressSource,u=t.addressBatchId,d=(0,a.A)(t,$),e.next=3,U(Q(Q({},d||{}),{},{editAddressFunc:function(){return(0,q._U)({parentOrderSn:r,parentOrderList:s,serialNo:o,pageSn:l,changeAddressSource:c,addressBatchId:u})}}));case 3:return p=e.sent,e.abrupt("return",p);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),te=function(){var e=(0,s.A)(i().mark((function e(n){var t,r,a,s,o,l,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.type,r=n.addressInfo,a=n.parentOrderSn,s=n.serialNo,o=n.changeAddressSource,l=n.onRetryChangeAddress,c=n.changeSucShowInfo,e.abrupt("return",new Promise((function(){t===m.LOW_TAX_TO_HIGH_RESULT_MODAL_TYPE.timeout&&B({changeSucShowInfo:c,type:m.LOW_TAX_TO_HIGH_RESULT_MODAL_TYPE.timeout,addressInfo:r||{},changeAddressSource:o,onClose:function(){Z({parentOrderSn:a,serialNo:s,changeAddressSource:o})},onConfirm:function(){Z({parentOrderSn:a,serialNo:s,changeAddressSource:o}),null==l||l()},onClickEdit:function(){Z({parentOrderSn:a,serialNo:s,changeAddressSource:o}),null==l||l()}}),t===m.LOW_TAX_TO_HIGH_RESULT_MODAL_TYPE.success&&B({changeSucShowInfo:c,type:m.LOW_TAX_TO_HIGH_RESULT_MODAL_TYPE.success,addressInfo:r,changeAddressSource:o,onClose:function(){},onConfirm:function(){},onClickEdit:function(){null==l||l()}})})));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),re=function(){var e=(0,s.A)(i().mark((function e(n){var t,r,a,s,o,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(t=n||{}).parentOrderSn,a=t.serialNo,s=t.paymentExtra,o=t.changeAddressSource,e.next=3,(0,q.oN)({parentOrderSn:r,serialNo:a,paymentExtra:s,changeAddressSource:o});case 3:return l=e.sent,e.abrupt("return",l);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ae=function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;return new Promise((function(a,s){n().then(a).catch((function(o){setTimeout((function(){1!==t?e(n,t-1,r).then(a,s):a(o)}),r)}))}))},se=function(e){var n,t=e||{},r=t.tradePaySn,a=t.totalAmount,s=t.parentOrderInfoList,o=t.currency,i=t.data;switch((i||{}).payStatus){case u.f6.SUCCESS:n=u.hq.Success;break;case u.f6.FAIL:n=u.hq.Fail;break;case u.f6.PROCESSING:n=u.hq.Processing;break;default:n=u.hq.Invalid}return Q(Q({},e||{}),{},{resultCode:n,response:Q({tradePaySn:r},i||{}),orderInfo:{totalAmount:a,parentOrderInfoList:s||[],currency:o,tradePaySn:r}})},oe=function(){var e=(0,s.A)(i().mark((function e(n){var t,r,a,s,o,u,d,m,f,h,v,A,g,_;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.parentOrderSn,r=n.onClickEdit,(0,p.xc)(),e.next=4,(0,q.ll)({parentOrderSn:t});case 4:if(a=e.sent,(0,p.W$)(),o=(s=a||{}).changeAddressStatus,u=s.alterInfo,d=s.errorPayload,o){e.next=10;break}return(0,c.A)((null==d||null===(m=d.viewObject)||void 0===m?void 0:m.title)||l.Ay.t("bgt_order_detail:network-error")),e.abrupt("return",{isSuccess:!1});case 10:if(h=(f=u||{}).alertContentRich,v=f.alertPromptRich,A=f.alertTitle,o!==z.w7.MerchantReview){e.next=19;break}return(0,p.xc)(),e.next=15,(0,q.Lb)({parentOrderSn:t,queryAddressScene:1});case 15:return g=e.sent,(0,p.W$)(),(0,j.o)({alertTitle:A,alertContent:h,addressInfo:g,parentOrderSn:t}),e.abrupt("return",{isSuccess:!0,showModal:!0});case 19:if(o!==z.w7.ModifiedAddressSuccess){e.next=27;break}return(0,p.xc)(),e.next=23,(0,q.Lb)({parentOrderSn:t,queryAddressScene:1});case 23:return _=e.sent,(0,p.W$)(),(0,j.a)({alertTitle:A,alertContent:h,alertPromptRich:v,addressInfo:_,parentOrderSn:t,onClickEditAddress:r}),e.abrupt("return",{isSuccess:!0,showModal:!0});case 27:return e.abrupt("return",{isSuccess:!0,showModal:!1});case 28:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=http://temudebug.com/sourcemaps/assets/js/5336_4c8827582b627a12a6b7.js.map